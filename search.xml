<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Jira - Backup</title>
    <url>/2019/09/14/dev/devops/jira/backup/</url>
    <content><![CDATA[<p>Jira를 backup 하는 방법에 대해 알아봅시다.<br>Jira의 경우 단순히 data 폴더를 덮어씌우는 경우 제대로 되지 않는 경우가 있기 때문에<br>Backup &amp; Restore 를 하는게 좋습니다.</p>
<h1 id="Backup"><a href="#Backup" class="headerlink" title="Backup"></a>Backup</h1><p><img data-src="/image/dev/devops/jira/backup/1.png" alt="1"></p>
<ul>
<li><code>시스템</code> 메뉴로 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/backup/2.png" alt="2"></p>
<ul>
<li><code>시스템 백업</code> 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/backup/3.png" alt="3"></p>
<ul>
<li>파일 이름 : 백업 결과물 파일 이름 입력.</li>
<li><code>백업</code> 버튼 클릭하여 백업.</li>
</ul>
<hr>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root ~]<span class="comment"># cd /var/atlassian/application-data/jira/export</span></span><br><span class="line">[root <span class="built_in">export</span>]<span class="comment"># ls</span></span><br><span class="line">2019-09-14-0136.zip</span><br></pre></td></tr></table></figure>
<ul>
<li>지정한 파일 이름으로 zip 압축 파일이 생성됩니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>Jira</category>
      </categories>
      <tags>
        <tag>Jira</tag>
        <tag>Backup</tag>
      </tags>
  </entry>
  <entry>
    <title>Jira - Installed to Docker</title>
    <url>/2019/09/16/dev/devops/jira/jira_to_docker/</url>
    <content><![CDATA[<p>기존 설치형 Jira를 Docker로 변경 하는 방법을 알아봅시다.</p>
<h1 id="Installed-Jira"><a href="#Installed-Jira" class="headerlink" title="Installed Jira"></a>Installed Jira</h1><p>설치형에서 docker로 변경하기 위해 필요한 파일과 구조를 파악해야 합니다.</p>
<h2 id="Tomcat-기반-구동-파일들이-있는-곳"><a href="#Tomcat-기반-구동-파일들이-있는-곳" class="headerlink" title="Tomcat 기반 구동 파일들이 있는 곳."></a>Tomcat 기반 구동 파일들이 있는 곳.</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root ~]<span class="comment"># cd /opt/atlassian/jira</span></span><br><span class="line">[root <span class="built_in">export</span>]<span class="comment"># ls</span></span><br><span class="line">BUILDING.txt     README.html  atlassian-jira  external-source  lib  temp         webapps</span><br><span class="line">CONTRIBUTING.md  README.md    bin             install.reg      licenses  tomcat-docs  work</span><br><span class="line">NOTICE           README.txt   conf            jre              logs      uninstall</span><br></pre></td></tr></table></figure>
<ul>
<li>Jira (8.4 기준) Servlet, Soy view template, JSP, JQuery, Tomcat 8.x 사용하고 있습니다.</li>
<li>bin : application 설정 파일과 application script 파일들이 있는 폴더.</li>
<li>conf : tomcat 설정 파일들이 있는 폴더.</li>
<li>jre : OpenJDK jre가 있는 폴더.</li>
<li>logs : log 파일들이 있는 폴더.</li>
<li>licenses : jira에서 사용중인 license text 파일(사용중인 오픈소스 libraries의 license text 입니다, Atlassian License가 아닙니다.)</li>
</ul>
<h2 id="첨부파일-plugin-등의-data-파일이-있는-곳"><a href="#첨부파일-plugin-등의-data-파일이-있는-곳" class="headerlink" title="첨부파일, plugin 등의 data 파일이 있는 곳."></a>첨부파일, plugin 등의 data 파일이 있는 곳.</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root ~]<span class="comment"># cd /var/atlassian/application-data/jira</span></span><br><span class="line">[root jira]<span class="comment"># ls</span></span><br><span class="line">analytics-logs  <span class="built_in">export</span>                     monitor</span><br><span class="line">caches          import                     plugins</span><br><span class="line">customisations  jira-healthcheck-eol.json  tmp</span><br><span class="line">data            <span class="built_in">log</span></span><br><span class="line">dbconfig.xml    logos</span><br></pre></td></tr></table></figure>
<ul>
<li>data : 첨부파일 및 각종 아바타 이미지들이 있는 폴더.</li>
<li>export : 시스템 백업시 생성되는 파일이 존재하는 폴더.</li>
<li>import : 시스템 복구시 백업 파일을 로드하는 폴더.</li>
<li>plugin : 플러그인이 있는 폴더.</li>
<li>dbconfig.xml : database 정보가 있습니다.</li>
</ul>
<blockquote>
<p><strong>자세한 내용은</strong><a href="https://confluence.atlassian.com/adminjiraserver073/jira-application-home-directory-861253888.html">Jira Home And other important directories</a><strong>에서 확인하시면 좋습니다.</strong></p>
</blockquote>
<h1 id="Docker-Jira"><a href="#Docker-Jira" class="headerlink" title="Docker Jira"></a>Docker Jira</h1><p>이제 본격적으로 docker로 변환하는 과정의 내용입니다.</p>
<h2 id="Docker-Image"><a href="#Docker-Image" class="headerlink" title="Docker Image"></a>Docker Image</h2><p>Atlassian에서 <a href="https://hub.docker.com/r/atlassian/jira-software">Jira Software Docker Image</a>를 제공하고 있고, 8.4를 사용하였습니다.</p>
<h2 id="순서"><a href="#순서" class="headerlink" title="순서"></a>순서</h2><ul>
<li>RDS 스냅샷 생성.</li>
<li>Jira Backup</li>
<li>Docker Compose yml 작성</li>
<li>application-data 복사하여 덮어쓰기</li>
<li>Directory owner 변경</li>
<li>Docker Container 생성 및 시작</li>
<li>Jira Restore.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/restore/1.png" alt="1"></p>
<ul>
<li><code>시스템</code> 메뉴로 이동</li>
</ul>
<p><a href="/2019/09/14/dev/devops/jira/backup/">Jira Backup</a><br><a href="/2019/09/06/dev/devops/aws/database/rds/snapshot/create/">RDS 스냅샷 생성</a><br><a href="/2019/09/15/dev/devops/jira/restore/">Jira Restore</a></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>Jira</category>
      </categories>
      <tags>
        <tag>Jira</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Jira - Restore</title>
    <url>/2019/09/15/dev/devops/jira/restore/</url>
    <content><![CDATA[<p>Jira를 restore 하는 방법에 대해 알아봅시다.</p>
<h1 id="Restore"><a href="#Restore" class="headerlink" title="Restore"></a>Restore</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root ~]<span class="comment"># cd /var/atlassian/application-data/jira/export</span></span><br><span class="line">[root <span class="built_in">export</span>]<span class="comment"># ls</span></span><br><span class="line">2019-09-14-0136.zip</span><br><span class="line">[root <span class="built_in">export</span>]<span class="comment"># cp 2019-09-14-0136.zip ../import</span></span><br></pre></td></tr></table></figure>
<ul>
<li>export에 생성된 백업 파일을 import 경로에 복사합니다.</li>
<li>docker 사용시 볼륨에서 동일하게 복사합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/restore/1.png" alt="1"></p>
<ul>
<li><code>시스템</code> 메뉴로 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/restore/2.png" alt="2"></p>
<ul>
<li><code>시스템 복원</code> 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/restore/3.png" alt="3"></p>
<ul>
<li>파일 이름 : 이전에 백업한 파일명 입력.</li>
<li><code>복원</code> 버튼 클릭하여 복원.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/jira/restore/4.png" alt="4"><br><img data-src="/image/dev/devops/jira/restore/5.png" alt="5"></p>
<ul>
<li>복구가 정상적으로 되었는지 확인합니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>Jira</category>
      </categories>
      <tags>
        <tag>Jira</tag>
        <tag>Restore</tag>
      </tags>
  </entry>
  <entry>
    <title>Altibase - Start and Shutdown</title>
    <url>/2018/01/30/dev/database/altibase/altibase_start_shutdown/</url>
    <content><![CDATA[<p>Altibase의 구동과 종료</p>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>Altibase를 Start하는 방법은 두 가지가 있습니다.</p>
<ul>
<li>Database 관리자인 sys -sysdba로 접속하여 구동.</li>
<li>Script command를 이용하여 구동.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> isql -u sys -p manager -sysdba</span></span><br></pre></td></tr></table></figure>

<p>Altibase status는 아래의 단계로 전이되며 startup command를 사용한다 옵션은 다음과 같습니다.</p>
<ol>
<li>PRE_PROCESS</li>
<li>PROCESS</li>
<li>CONTROL</li>
<li>META</li>
<li>SERVICE</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> startup [ process |  control | meta | service ];</span></span><br></pre></td></tr></table></figure>

<p>상태가 “SERVICE”가 되어야 일반 사용자들이 Database에 접근 가능합니다.<br><font color="red">* Altibase status는 다음 status로 진행만 할 수 있으며, 이전 status로 되돌아갈 수는 없습니다.</font></p>
<h3 id="PROCESS"><a href="#PROCESS" class="headerlink" title="PROCESS"></a>PROCESS</h3><p>PROCESS 옵션으로 구동시 다음과 같습니다.</p>
<ul>
<li>Database를 CREATE or DROP 할수 있다.</li>
<li>제한된 개수의 성능 뷰 들을 조회할 수 있다.</li>
<li>Property 값들을 변경할 수 있다.</li>
<li>CONTROL 단계로 전이할 수 있다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> startup service;</span></span><br><span class="line">Trying Connect to Altibase..... Connected with Altibase.</span><br><span class="line">TRANSITION TO PHASE : PROCESS</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">--- STARTUP Process SUCCESS ---</span><br><span class="line">Command execute success.</span><br></pre></td></tr></table></figure>

<h3 id="CONTROL"><a href="#CONTROL" class="headerlink" title="CONTROL"></a>CONTROL</h3><p>CONTROL 옵션으로 구동시 다음과 같습니다.</p>
<ul>
<li>Media Recovery 수행 가능.</li>
<li>META 단계로 전이할 수 있다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> startup service;</span></span><br><span class="line">Trying Connect to Altibase..... Connected with Altibase.</span><br><span class="line">TRANSITION TO PHASE : PROCESS</span><br><span class="line">TRANSITION TO PHASE : CONTROL</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">--- STARTUP Process SUCCESS ---</span><br><span class="line">Command execute success.</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="META"><a href="#META" class="headerlink" title="META"></a>META</h3><p>META 옵션으로 구동시 다음과 같습니다.</p>
</blockquote>
<ul>
<li>Dictionary table을 업그레이드 할 수 있다.</li>
<li>SERVICE 단계로 전이할 수 있다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> startup service;</span></span><br><span class="line">Trying Connect to Altibase..... Connected with Altibase.</span><br><span class="line">TRANSITION TO PHASE : PROCESS</span><br><span class="line">TRANSITION TO PHASE : CONTROL</span><br><span class="line">TRANSITION TO PHASE : META</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">--- STARTUP Process SUCCESS ---</span><br><span class="line">Command execute success.</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="SERVICE"><a href="#SERVICE" class="headerlink" title="SERVICE"></a>SERVICE</h3><p>service 옵션으로 구동시 다음과 같습니다.</p>
</blockquote>
<ul>
<li>일반 사용자 접속 가능.</li>
<li>shutdown normal/immediate/abort command를 수행할 수 있다.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> startup service;</span></span><br><span class="line">Trying Connect to Altibase..... Connected with Altibase.</span><br><span class="line">TRANSITION TO PHASE : PROCESS</span><br><span class="line">TRANSITION TO PHASE : CONTROL</span><br><span class="line">TRANSITION TO PHASE : META</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">TRANSITION TO PHASE : SERVICE</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">--- STARTUP Process SUCCESS ---</span><br><span class="line">Command execute success.</span><br></pre></td></tr></table></figure>

<h2 id="Shutdown"><a href="#Shutdown" class="headerlink" title="Shutdown"></a>Shutdown</h2><p>현재 구동중인 Altibase를 종료하려면 shutdown command를 사용한다 옵션은 다음과 같습니다.</p>
<ol>
<li>NORMAL</li>
<li>IMMEDIATE</li>
<li>ABORT</li>
</ol>
<h3 id="NORMAL"><a href="#NORMAL" class="headerlink" title="NORMAL"></a>NORMAL</h3><p>Altibase를 일반적으로 종료하는 방식이며<br>모든 Client들이 접속을 끊을 때까지 종료 작업을 대기하고, 종료시 내부적으로 다음의 작업이 수행됩니다.</p>
<ul>
<li>Server &lt;-&gt; Client 통신 세션을 감지하는 Thread 종료</li>
<li>서비스 Thread 종료</li>
<li>자료저장 관리자 종료</li>
<li>마지막으로 Altibase프로세스가 완전히 종료 작업</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> shutdown normal;</span></span><br><span class="line">Ok...Shutdown Proceeding....</span><br><span class="line"></span><br><span class="line">TRANSITION TO PHASE : Shutdown Altibase</span><br><span class="line">...</span><br><span class="line">shutdown normal success.</span><br></pre></td></tr></table></figure>

<h3 id="IMMEDIATE"><a href="#IMMEDIATE" class="headerlink" title="IMMEDIATE"></a>IMMEDIATE</h3><p>IMMEDIATE 옵션을 사용시 Altibase는 현재 연결된 session을 강제로 끊은 다음<br>현재 실행 중이던 Transaction들을 rollback시키고 종료합니다.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> shutdown immedate;</span></span><br><span class="line">Ok...Shutdown Proceeding....</span><br><span class="line"></span><br><span class="line">TRANSITION TO PHASE : Shutdown Altibase</span><br><span class="line">...</span><br><span class="line">shutdown immediate success.</span><br></pre></td></tr></table></figure>

<p><font color="red">* script command는 server stop</font></p>
<h3 id="ABORT"><a href="#ABORT" class="headerlink" title="ABORT"></a>ABORT</h3><p>ABORT 옵션을 사용시 Altibase process를 강제로 kill 하게되는데<br>이 방법으로 Altibase를 종료하게 되면, Database가 비정상적인 상태가 될수 있으며, 다음에 구동시<br>Database 복구 과정을 거쳐야 할 수도 있습니다.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">iSQL(sysdba)&gt;</span><span class="bash"> shutdown immedate;</span></span><br></pre></td></tr></table></figure>

<p><font color="red">* script command는 server kill</font></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Altibase</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Altibase</tag>
        <tag>Startup</tag>
        <tag>Shutdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Altibase - 유저 관련 SQL</title>
    <url>/2018/01/30/dev/database/altibase/altibase_user_sql/</url>
    <content><![CDATA[<p>Altibase의 유저 관련 SQL</p>
<h2 id="CREATE"><a href="#CREATE" class="headerlink" title="CREATE"></a>CREATE</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 패스워드 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> &#123;<span class="keyword">password</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 DEFAULT TABLESPACE 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125;</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> &#123;def_tbs_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 TEMPORARY TABLESPACE 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125;</span><br><span class="line"><span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> &#123;temp_tbs_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 TABLESPACE 접근 허용 여부 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125;</span><br><span class="line"><span class="keyword">ACCESS</span> &#123;tbs_name&#125; <span class="keyword">ON</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 패스워드, DEFAULT/TEMPORARY TABLESPACE, TABLESPACE 접근 허용 여부 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> &#123;<span class="keyword">password</span>&#125;</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> &#123;def_tbs_name&#125;</span><br><span class="line"><span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> &#123;temp_tbs_name&#125;</span><br><span class="line"><span class="keyword">ACCESS</span> &#123;tbs_name&#125; <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure>

<p><b>Example</b></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 패스워드 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> testpassword;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 DEFAULT TABLESPACE 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> <span class="keyword">user_data</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 TEMPORARY TABLESPACE 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER</span><br><span class="line"><span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> temp_data;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 TABLESPACE 접근 허용 여부 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER</span><br><span class="line"><span class="keyword">ACCESS</span> <span class="keyword">user_data</span> <span class="keyword">ON</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 생성과 패스워드, DEFAULT/TEMPORARY TABLESPACE 지정</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> testpassword</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> <span class="keyword">user_data</span></span><br><span class="line"><span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> temp_data</span><br><span class="line"><span class="keyword">ACCESS</span> <span class="keyword">user_data</span> <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure>

<h2 id="ALTER"><a href="#ALTER" class="headerlink" title="ALTER"></a>ALTER</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 비밀번호 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> &#123;<span class="keyword">password</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- DEFAULT TABLESPACE 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> &#123;def_tbs_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TEMPORARY TABLESPACE 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> &#123;temp_tbs_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TABLESPACE 접근 허용 여부 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">ACCESS</span> &#123;tbs_name&#125; <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure>

<p><b>Example</b></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 비밀번호 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> testpassword1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- DEFAULT TABLESPACE 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">DEFAULT</span> <span class="keyword">TABLESPACE</span> user_data2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TEMPORARY TABLESPACE 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">TEMPORARY</span> <span class="keyword">TABLESPACE</span> temp_data2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TABLESPACE 접근 허용 여부 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">ACCESS</span> user_data2 <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure>

<h2 id="DROP"><a href="#DROP" class="headerlink" title="DROP"></a>DROP</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>

<p><b>Example</b></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Altibase</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Altibase</tag>
        <tag>User</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - Database 접근 관련 SQL</title>
    <url>/2018/01/29/dev/database/ibm_pda/ibm_netezza_dbconnect_sql/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 Database 접근 관련 SQL</p>
<h2 id="Database-접근-권한"><a href="#Database-접근-권한" class="headerlink" title="Database 접근 권한"></a>Database 접근 권한</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저에게 Database 접근 권한 부여 (CONNECT ON or LIST ON)</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">ON</span> &#123;database_name&#125; <span class="keyword">TO</span> &#123;account_name&#125;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">LIST</span> <span class="keyword">ON</span> &#123;database_name&#125; <span class="keyword">TO</span> &#123;account_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저의 Database 접근 권한 회수</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">CONNECT</span> <span class="keyword">ON</span> &#123;database_name&#125; <span class="keyword">TO</span> &#123;accoount_name&#125;;</span><br></pre></td></tr></table></figure>
<p>접근 권한 부여는 CONNECT ON, LIST ON의 효과는 동일 하며<br>접근 권한 부여 회수는 REVOKE CONNECT ON으로만 가능하다</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저에게 Database 접근 권한 부여 (CONNECT ON or LIST ON)</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">ON</span> TESTDB <span class="keyword">TO</span> TESTUSER;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">LIST</span> <span class="keyword">ON</span> TESTDB <span class="keyword">TO</span> TESTUSER;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저의 Database 접근 권한 회수</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">CONNECT</span> <span class="keyword">ON</span> TESTDB <span class="keyword">TO</span> TESTUSER;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
        <tag>Connect</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - Create GROUP_CONCAT aggregates (none TOOLKIT)</title>
    <url>/2018/01/30/dev/database/ibm_pda/ibm_netezza_group_concat_aggregates/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 GROUP_CONCAT aggregates 생성 (Toolkit 미설치)<br>앞서 유저, 그룹, database 정보 관련 SQL Post에서 toolkit 지원받을시 추가적인 비용이 필요하므로 임의로<br>GROUP_CONCAT을 생성하여 사용하는 방법과 C++ 코드로 진행 했었습니다.<br>참고로 주사용 언어가 Java이기 때문에 C++ 스탠다드 형식에 따르지 않은 경우가 있을수도 있습니다.</p>
<ul>
<li>GroupConcat.cpp : <b>GROUP_CONCAT(VARCHAR(ANY))</b><br>변수값으로 지정된 문자열로 처리 (OUT_DELIM의 값)</li>
<li>GroupConcatSep.cpp : <b>GROUP_CONCAT(VARCHAR(ANY), VARCHAR(1))</b><br>두번째 Prameter값으로 처리</li>
<li>install.sh</li>
</ul>
<p>GroupConcat, GroupConcatSep 둘 중 필요한것만 적용시 install.sh의 수정이 필요해집니다.<br><font color="red">* 정확한 원인 파악은 하지 못했지만 해당 환경에서 GroupConcat의 OUT_DELIM을 “;;” 또는 GroupConcatSep의 두번째 Prameter값을 “;;”으로 사용시 정상적으로 수행되지 않았던 이슈가 있어서 “,”으로 처리 후 server-side에서 replaceAll(“,”, “;;”)을 사용한 기억이 있습니다<br>(해당 프로젝트의 구분값이 “;;” 였으므로 불가피), 정확히 수정 가능하신분의 feedback 부탁드립니다.</font></p>
<h2 id="GroupConcat-cpp"><a href="#GroupConcat-cpp" class="headerlink" title="GroupConcat.cpp"></a>GroupConcat.cpp</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Created by munsu seo (sms)</span></span><br><span class="line"><span class="comment">// Usage: select group_concat(string) from &lt;table&gt; group by columns</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;udxinc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DATA_DELIM 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OUT_DELIM <span class="meta-string">&#x27;,&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> nz::udx;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupConcat</span> :</span> <span class="keyword">public</span> Uda &#123;</span><br><span class="line">  <span class="keyword">public</span>: <span class="function"><span class="keyword">static</span> Uda* <span class="title">instantiate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">initializeState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    setStateNull(<span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">accumulate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    StringArg *a = stringArg(<span class="number">0</span>);</span><br><span class="line">    StringArg *s = stringState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStateNull(<span class="number">0</span>)) &#123;</span><br><span class="line">      setStateNull(<span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">      <span class="keyword">if</span> (len &gt; s-&gt;dec_length) &#123;</span><br><span class="line">        len = s-&gt;dec_length;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">memcpy</span>(s-&gt;data, a-&gt;data, len);</span><br><span class="line">      s-&gt;length = len;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> curlen = s-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (curlen &gt;= s-&gt;dec_length) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s-&gt;data[curlen] = DATA_DELIM;</span><br><span class="line">    curlen++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (len + curlen &gt; s-&gt;dec_length) &#123;</span><br><span class="line">      len = s-&gt;dec_length - curlen;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memcpy</span>(s-&gt;data + curlen, a-&gt;data, len);</span><br><span class="line">    s-&gt;length = curlen + len;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    StringArg *a = stringArg(<span class="number">0</span>);</span><br><span class="line">    StringArg *s = stringState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStateNull(<span class="number">0</span>)) &#123;</span><br><span class="line">      setStateNull(<span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line">      <span class="built_in">memcpy</span>(s-&gt;data, a-&gt;data, a-&gt;length);</span><br><span class="line">      s-&gt;length = a-&gt;length;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> curlen = s-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (curlen &gt;= s-&gt;dec_length) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s-&gt;data[curlen] = DATA_DELIM;</span><br><span class="line">    curlen++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">    <span class="keyword">if</span>(len + curlen &gt; s-&gt;dec_length)&#123;</span><br><span class="line">      len = s-&gt;dec_length - curlen;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memcpy</span>(s-&gt;data + curlen, a-&gt;data, len);</span><br><span class="line">    s-&gt;length = curlen + len;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function">ReturnValue <span class="title">finalResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> *str;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">list</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; values;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) NZ_UDX_RETURN_NULL();</span><br><span class="line"></span><br><span class="line">    StringReturn *r = stringReturnInfo();</span><br><span class="line">    StringArg *s = stringArg(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (r-&gt;size &lt; s-&gt;length) &#123;</span><br><span class="line">      throwUdxException(<span class="string">&quot;GROUP_CONCAT(): Result size too large!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    r-&gt;size = s-&gt;length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> *p = s-&gt;data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s-&gt;length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (s-&gt;data[i] != DATA_DELIM) &#123;</span><br><span class="line">        len++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        str = <span class="keyword">new</span> <span class="built_in">string</span>(p, len);</span><br><span class="line">        values.push_back(*str);</span><br><span class="line">        p = s-&gt;data + i + <span class="number">1</span>;</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    str = <span class="keyword">new</span> <span class="built_in">string</span>(p,len);</span><br><span class="line">    values.push_back(*str);</span><br><span class="line"></span><br><span class="line">    values.sort();</span><br><span class="line"></span><br><span class="line">    setReturnNull(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!values.empty()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        r-&gt;data[len++] = OUT_DELIM;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">std</span>::<span class="built_in">string</span> tmp = values.front();</span><br><span class="line">      <span class="built_in">memcpy</span>(r-&gt;data+len, tmp.c_str(), tmp.length());</span><br><span class="line">      len += tmp.length();</span><br><span class="line">      values.pop_front();</span><br><span class="line">    &#125;</span><br><span class="line">    NZ_UDX_RETURN_STRING(r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Uda* <span class="title">GroupConcat::instantiate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> GroupConcat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="GroupConcatSep-cpp"><a href="#GroupConcatSep-cpp" class="headerlink" title="GroupConcatSep.cpp"></a>GroupConcatSep.cpp</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Created by munsu seo (sms)</span></span><br><span class="line"><span class="comment">// Usage: select group_concat(string,char) from &lt;table&gt; group by columns;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;udxinc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DATA_DELIM 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> nz::udx;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupConcatSep</span> :</span> <span class="keyword">public</span> Uda &#123;</span><br><span class="line">  <span class="keyword">public</span>: <span class="function"><span class="keyword">static</span> Uda* <span class="title">instantiate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">initializeState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    setStateNull(<span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">accumulate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    StringArg *a = stringArg(<span class="number">0</span>);</span><br><span class="line">    StringArg *s = stringState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStateNull(<span class="number">0</span>)) &#123;</span><br><span class="line">      setStateNull(<span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isArgNull(<span class="number">1</span>)) &#123;</span><br><span class="line">        setStateNull(<span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        StringArg *sep = stringArg(<span class="number">1</span>);</span><br><span class="line">        StringArg *sepState = stringState(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (sep-&gt;length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          setStateNull(<span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">          sepState-&gt;data[<span class="number">0</span>] = sep-&gt;data[<span class="number">0</span>];</span><br><span class="line">          sepState-&gt;length = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">      <span class="keyword">if</span> (len &gt; s-&gt;dec_length) &#123;</span><br><span class="line">        len = s-&gt;dec_length;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">memcpy</span>(s-&gt;data, a-&gt;data, len);</span><br><span class="line">      s-&gt;length = len;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> curlen = s-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (curlen &gt;= s-&gt;dec_length)&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s-&gt;data[curlen] = DATA_DELIM;</span><br><span class="line">    curlen++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (len + curlen &gt; s-&gt;dec_length) &#123;</span><br><span class="line">      len = s-&gt;dec_length - curlen;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memcpy</span>(s-&gt;data + curlen, a-&gt;data, len);</span><br><span class="line">    s-&gt;length = curlen + len;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    StringArg *a = stringArg(<span class="number">0</span>);</span><br><span class="line">    StringArg *s = stringState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStateNull(<span class="number">0</span>)) &#123;</span><br><span class="line">      setStateNull(<span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isArgNull(<span class="number">1</span>)) &#123;</span><br><span class="line">        setStateNull(<span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        setStateNull(<span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">        StringArg *sep = stringArg(<span class="number">1</span>);</span><br><span class="line">        StringArg *sepState = stringState(<span class="number">1</span>);</span><br><span class="line">        sepState-&gt;data[<span class="number">0</span>] = sep-&gt;data[<span class="number">0</span>];</span><br><span class="line">        sepState-&gt;length = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">memcpy</span>(s-&gt;data, a-&gt;data, a-&gt;length);</span><br><span class="line">      s-&gt;length = a-&gt;length;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> curlen = s-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> (curlen &gt;= s-&gt;dec_length) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s-&gt;data[curlen] = DATA_DELIM;</span><br><span class="line">    curlen++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = a-&gt;length;</span><br><span class="line">    <span class="keyword">if</span> ( len + curlen &gt; s-&gt;dec_length) &#123;</span><br><span class="line">      len = s-&gt;dec_length - curlen;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memcpy</span>(s-&gt;data + curlen, a-&gt;data, len);</span><br><span class="line">    s-&gt;length = curlen + len;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function">ReturnValue <span class="title">finalResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> *str;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">list</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; values;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isArgNull(<span class="number">0</span>)) NZ_UDX_RETURN_NULL();</span><br><span class="line"></span><br><span class="line">    StringReturn *r = stringReturnInfo();</span><br><span class="line">    StringArg *s = stringArg(<span class="number">0</span>);</span><br><span class="line">    StringArg *sep = stringArg(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (r-&gt;size &lt; s-&gt;length) &#123;</span><br><span class="line">      throwUdxException(<span class="string">&quot;GROUP_CONCAT(): Result size too large!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    r-&gt;size = s-&gt;length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> *p = s-&gt;data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s-&gt;length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(s-&gt;data[i] != DATA_DELIM) &#123;</span><br><span class="line">        len++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        str = <span class="keyword">new</span> <span class="built_in">string</span>(p, len);</span><br><span class="line">        values.push_back(*str);</span><br><span class="line">        p = s-&gt;data + i + <span class="number">1</span>;</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    str = <span class="keyword">new</span> <span class="built_in">string</span>(p,len);</span><br><span class="line">    values.push_back(*str);</span><br><span class="line"></span><br><span class="line">    values.sort();</span><br><span class="line"></span><br><span class="line">    setReturnNull(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!values.empty()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (len&gt;<span class="number">0</span> &amp;&amp; !isArgNull(<span class="number">1</span>)) &#123;</span><br><span class="line">        r-&gt;data[len++] = sep-&gt;data[<span class="number">0</span>];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">std</span>::<span class="built_in">string</span> tmp = values.front();</span><br><span class="line">      <span class="built_in">memcpy</span>(r-&gt;data+len, tmp.c_str(), tmp.length());</span><br><span class="line">      len += tmp.length();</span><br><span class="line">      values.pop_front();</span><br><span class="line">    &#125;</span><br><span class="line">    NZ_UDX_RETURN_STRING(r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Uda* <span class="title">GroupConcatSep::instantiate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> GroupConcatSep;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="install-sh"><a href="#install-sh" class="headerlink" title="install.sh"></a>install.sh</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Created by munsu seo (sms)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#DB=$1if [[ -z $DB ]]; then</span></span><br><span class="line"><span class="comment">#DB=$NZ_DATABASEfi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [[ -z $DB ]]; then</span></span><br><span class="line"><span class="comment">#print &quot;Usage: install &lt;database&gt;&quot;</span></span><br><span class="line"><span class="comment">#return 1</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> NZ_DATABASE=<span class="string">&quot;SYSTEM&quot;</span></span><br><span class="line"><span class="built_in">export</span> NZ_USER=<span class="string">&quot;ADMIN&quot;</span></span><br><span class="line"><span class="built_in">export</span> NZ_PASSWORD=<span class="string">&quot;password&quot;</span></span><br><span class="line"><span class="built_in">export</span> DB=<span class="string">&quot;SYSTEM&quot;</span></span><br><span class="line"></span><br><span class="line">nzudxcompile GroupConcat.cpp \</span><br><span class="line"> --unfenced \</span><br><span class="line"> --sig   <span class="string">&quot;group_concat(varchar(any))&quot;</span> \</span><br><span class="line"> --state  <span class="string">&quot;(varchar(4000))&quot;</span> \</span><br><span class="line"> --<span class="built_in">return</span>  <span class="string">&quot;varchar(4000)&quot;</span> \</span><br><span class="line"> --class  <span class="string">&quot;GroupConcat&quot;</span></span><br><span class="line"></span><br><span class="line">nzudxcompile GroupConcatSep.cpp \</span><br><span class="line"> --unfenced \</span><br><span class="line"> --sig   <span class="string">&quot;group_concat(varchar(any),varchar(1))&quot;</span> \</span><br><span class="line"> --state  <span class="string">&quot;(varchar(4000),varchar(1))&quot;</span> \</span><br><span class="line"> --<span class="built_in">return</span>  <span class="string">&quot;varchar(4000)&quot;</span> \</span><br><span class="line"> --class  <span class="string">&quot;GroupConcatSep&quot;</span></span><br><span class="line"></span><br><span class="line">rm *.o_*</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
        <tag>GROUP_CONCAT</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - 그룹 관련 SQL</title>
    <url>/2018/01/29/dev/database/ibm_pda/ibm_netezza_group_sql/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 그룹 관련 SQL</p>
<h2 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 일반 그룹 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> &#123;group_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 리소스 그룹 생성 (min and max, 둘중 하나만 지정 가능)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> &#123;group_name&#125; <span class="keyword">WITH</span> <span class="keyword">RESOURCE</span> <span class="keyword">MINIMUM</span> &#123;min_percent&#125; <span class="keyword">RESOURCE</span> MAXIMUM &#123;max_percent&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 리소스 그룹 수정 (min and max, 둘중 하나만 수정 가능)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> &#123;group_name&#125; <span class="keyword">WITH</span> <span class="keyword">RESOURCE</span> <span class="keyword">MINIMUM</span> &#123;min_percent&#125; <span class="keyword">RESOURCE</span> MAXIMUM &#123;max_percent&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 만료 기간 지정 그룹 생성 (일)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> &#123;group_name&#125; <span class="keyword">WITH</span> PASSWORDEXPIRY &#123;<span class="keyword">days</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 만료 기간 지정 그룹 수정 (일)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> &#123;group_name&#125; <span class="keyword">WITH</span> PASSWORDEXPIRY &#123;<span class="keyword">days</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 그룹 삭제</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">GROUP</span> &#123;group_name&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>리소스 그룹의 경우, 리소스가 percent가 부여된 여러개의 그룹이 시스템에서 작업을 실행하면 스케줄러가 리소스 사용률의 균형을 조절한다.</li>
<li>만료기간이 지정된 그룹이 만료되면 그룹에 속해있는 유저도 만료된다.</li>
</ol>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 일반 그룹 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> TESTGROUP;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 리소스 그룹 생성 (min and max, 하나 또는 둘 지정 가능)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> TESTGROUP <span class="keyword">WITH</span> <span class="keyword">RESOURCE</span> <span class="keyword">MINIMUM</span> <span class="number">30</span> <span class="keyword">RESOURCE</span> MAXIMUM <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 리소스 그룹 수정 (min and max, 하나 또는 둘 지정 가능)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> TESTGROUP <span class="keyword">WITH</span> <span class="keyword">RESOURCE</span> <span class="keyword">MINIMUM</span> <span class="number">20</span> <span class="keyword">RESOURCE</span> MAXIMUM <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 만료 기간 지정 그룹 생성 (일)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">GROUP</span> TESTGROUP <span class="keyword">WITH</span> PASSWORDEXPIRY <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 만료 기간 지정 그룹 수정 (일)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> TESTGROUP <span class="keyword">WITH</span> PASSWORDEXPIRY <span class="number">62</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 그룹 삭제</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">GROUP</span> TESTGROUP</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
        <tag>Group</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza dev setting &amp; basic command</title>
    <url>/2017/08/31/dev/database/ibm_pda/ibm_netezza_setting_cmd/</url>
    <content><![CDATA[<p>IBM PDA(Pure Data Analytics) NETEZZA<br>IBM 에서 제공하는 PDA는 분석 업무에 최적화된 전용 어플라이언스입니다<br>그에 포함되어있는 DBMS가 Netezza이다 SQL은 nzsql이라 지칭 하며 Postgre 기반으로 만들어져 있고<br>지원하는 JDK는 Netezza 7.1.0.0 이상 버전을 사용시 JDK 1.7이 필요하며<br>그 이하 버전은 1.5를 지원하므로 환경 세팅시 구분하여 다운로드 해야합니다.</p>
<h2 id="접속-정보"><a href="#접속-정보" class="headerlink" title="접속 정보"></a>접속 정보</h2><p>IBM에서 제공하는 가성화된 버전을 다운로드하여 실행시 접속 정보는 다음과 같습니다.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Password</th>
</tr>
</thead>
<tbody><tr>
<td>nz</td>
<td>nz</td>
</tr>
<tr>
<td>admin</td>
<td>password</td>
</tr>
<tr>
<td>root</td>
<td>netezza</td>
</tr>
</tbody></table>
<h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>nzstart</td>
<td>Start the system</td>
</tr>
<tr>
<td>nzstop</td>
<td>Stop the system</td>
</tr>
<tr>
<td>nzsystem pause</td>
<td>Pause the system</td>
</tr>
<tr>
<td>nzsystem resume</td>
<td>Resume the system</td>
</tr>
<tr>
<td>nzsystem offline</td>
<td>Take the system offline</td>
</tr>
<tr>
<td>nzsystem restart</td>
<td>Restart the system</td>
</tr>
<tr>
<td>nzstate</td>
<td>Status the system</td>
</tr>
</tbody></table>
<p>만약에 state가 “Discovering”으로 오래 유지되며 정상화 되지 않는경우 다음과 진행합니다.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ nzstop</span><br><span class="line">$ nzpush -all power off</span><br><span class="line">$ nzpush -all power on</span><br><span class="line">$ nzstart</span><br><span class="line">$ nzstate</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Startup</tag>
        <tag>Shutdown</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - 유저, 그룹, Database 정보 관련 SQL</title>
    <url>/2018/01/29/dev/database/ibm_pda/ibm_netezza_user_group_info_sql/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 유저, 그룹, Database 정보 관련 SQL.</p>
<h2 id="유저의-관리자-여부-만료-여부"><a href="#유저의-관리자-여부-만료-여부" class="headerlink" title="유저의 관리자 여부, 만료 여부"></a>유저의 관리자 여부, 만료 여부</h2><p>IBM에서 제공하는 Toolkit에 각종 function, aggregates 등등이 추가됩니다.<br>실제 개발을 하면서 GRROUP_CONCAT을 쓸 경우가 많았고 GROUP_CONCAT은 Toolkit이 설치 되어있어야 쓸수 있다.<br>하지만 Product 환경에서는 Toolkit 없는 경우도 있기 때문에 3가지 Version으로 Query를 작성하였다</p>
<ol>
<li>Toolkit 설치되어 있지 않은 version</li>
<li>Toolkit을 지원 받을시 추가적인 비용이 필요하므로 GROUP_CONCAT을 cpp으로 aggregates를 생성 및 사용 version</li>
<li>Toolkit이 있을시 GROUP_CONCAT 사용 version</li>
</ol>
<p><font color="red">* 필요한 값 USERNAME, ADMIN_STATUS(관리자 여부), REVOKE_STATUS(REVOKE 여부), DATABASE(해당 사용자가 접근 가능한 DATABASE)</font><br><font color="red">* Project의 DATABASE를 구분 하는 기준값은 “;;”으로 정하였었다.</font></p>
<h3 id="TOOLKIT이-설치되어-있지-않은-version"><a href="#TOOLKIT이-설치되어-있지-않은-version" class="headerlink" title="TOOLKIT이 설치되어 있지 않은 version"></a>TOOLKIT이 설치되어 있지 않은 version</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- USERNAME, ADMIN_STATUS, REVOKE_STATUS</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.USERESOURCEGRPNAME = <span class="string">&#x27;_ADMIN_&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="keyword">DECODE</span> (</span><br><span class="line">      (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">          <span class="keyword">COUNT</span>(*)</span><br><span class="line">        <span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line">        <span class="keyword">WHERE</span> UOPOBJPRIV = <span class="number">0</span></span><br><span class="line">        <span class="keyword">AND</span> USERNAME = A.USERNAME</span><br><span class="line">      ),</span><br><span class="line">      <span class="number">0</span>, <span class="string">&#x27;NONE&#x27;</span>, <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> ADMIN_STATUS,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.VALIDUNTIL <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">AND</span> A.VALIDUNTIL &lt; <span class="keyword">NOW</span>() <span class="keyword">THEN</span> <span class="string">&#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_INVALID = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.ACC_LOCKED = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_EXPIRY != 0 AND DATE(A.PWD_LAST_CHGED + A.PWD_EXPIRY) &lt;= DATE(TO_CHAR(NOW(), &#x27;YYYY-MM-DD&#x27;)) THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;ACTIVE&#x27;</span></span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> REVOKE_STATUS</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A</span><br><span class="line"><span class="comment">-- WHERE A.USERNAME = UPPPER(&#x27;TESTUSER&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- DATABASE</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  OBJECTNAME <span class="keyword">AS</span> DATABASE_NAME</span><br><span class="line"><span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line"><span class="keyword">WHERE</span> OBJECTTYPE = <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> OBJECTNAME &lt;&gt; <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> USERNAME = &#123;account_name&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TOOLKIT-지원-없이-GROUP-CONCAT을-cpp으로-aggregates를-생성-및-사용-version"><a href="#TOOLKIT-지원-없이-GROUP-CONCAT을-cpp으로-aggregates를-생성-및-사용-version" class="headerlink" title="TOOLKIT 지원 없이 GROUP_CONCAT을 cpp으로 aggregates를 생성 및 사용 version"></a>TOOLKIT 지원 없이 GROUP_CONCAT을 cpp으로 aggregates를 생성 및 사용 version</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- USERNAME, ADMIN_STATUS, REVOKE_STATUS, DATABASE</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.USERESOURCEGRPNAME = <span class="string">&#x27;_ADMIN_&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="keyword">DECODE</span> (</span><br><span class="line">      (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">          <span class="keyword">COUNT</span>(*)</span><br><span class="line">        <span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line">        <span class="keyword">WHERE</span> UOPOBJPRIV = <span class="number">0</span></span><br><span class="line">        <span class="keyword">AND</span> USERNAME = A.USERNAME</span><br><span class="line">      ),</span><br><span class="line">      <span class="number">0</span>, <span class="string">&#x27;NONE&#x27;</span>, <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> ADMIN_STATUS,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.VALIDUNTIL <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">AND</span> A.VALIDUNTIL &lt; <span class="keyword">NOW</span>() <span class="keyword">THEN</span> <span class="string">&#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_INVALID = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.ACC_LOCKED = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_EXPIRY != 0 AND DATE(A.PWD_LAST_CHGED + A.PWD_EXPIRY) &lt;= DATE(TO_CHAR(NOW(), &#x27;YYYY-MM-DD&#x27;)) THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;ACTIVE&#x27;</span></span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> REVOKE_STATUS,</span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      <span class="keyword">GROUP_CONCAT</span>(OBJECTNAME, <span class="string">&#x27;,&#x27;</span>) <span class="keyword">AS</span> DATABASE_NAME</span><br><span class="line">    <span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line">    <span class="keyword">WHERE</span> OBJECTTYPE = <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> OBJECTNAME &lt;&gt; <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> USERNAME = A.USERNAME</span><br><span class="line">  )</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A</span><br><span class="line"><span class="comment">-- WHERE A.USERNAME = UPPPER(&#x27;TESTUSER&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>“;;”을 사용시 정상적으로 수행되지 않았던 이슈가 있어서 “,”으로 처리 후 server-side에서 replaceAll(“,”, “;;”)을 사용하였다 (개발 Project의 구분값의 기준이 “;;”으므로 불가피)<br><font color="red">* GROUP_CONCAT cpp은 따로 Post할 예정이다</font></p>
<h3 id="TOOLKIT이-있을시-GROUP-CONCAT-사용-version"><a href="#TOOLKIT이-있을시-GROUP-CONCAT-사용-version" class="headerlink" title="TOOLKIT이 있을시 GROUP_CONCAT 사용 version"></a>TOOLKIT이 있을시 GROUP_CONCAT 사용 version</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- USERNAME, ADMIN_STATUS, REVOKE_STATUS, DATABASE</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.USERESOURCEGRPNAME = <span class="string">&#x27;_ADMIN_&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="keyword">DECODE</span> (</span><br><span class="line">      (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">          <span class="keyword">COUNT</span>(*)</span><br><span class="line">        <span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line">        <span class="keyword">WHERE</span> UOPOBJPRIV = <span class="number">0</span></span><br><span class="line">        <span class="keyword">AND</span> USERNAME = A.USERNAME</span><br><span class="line">      ),</span><br><span class="line">      <span class="number">0</span>, <span class="string">&#x27;NONE&#x27;</span>, <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> ADMIN_STATUS,</span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> A.VALIDUNTIL <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">AND</span> A.VALIDUNTIL &lt; <span class="keyword">NOW</span>() <span class="keyword">THEN</span> <span class="string">&#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_INVALID = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.ACC_LOCKED = TRUE THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="comment">-- WHEN A.PWD_EXPIRY != 0 AND DATE(A.PWD_LAST_CHGED + A.PWD_EXPIRY) &lt;= DATE(TO_CHAR(NOW(), &#x27;YYYY-MM-DD&#x27;)) THEN &#x27;REVOKE&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;ACTIVE&#x27;</span></span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> REVOKE_STATUS,</span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      <span class="keyword">GROUP_CONCAT</span>(OBJECTNAME, <span class="string">&#x27;;;&#x27;</span>) <span class="keyword">AS</span> DATABASE_NAME</span><br><span class="line">    <span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line">    <span class="keyword">WHERE</span> OBJECTTYPE = <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> OBJECTNAME &lt;&gt; <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> USERNAME = A.USERNAME</span><br><span class="line">  )</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A</span><br><span class="line"><span class="comment">-- WHERE A.USERNAME = UPPPER(&#x27;TESTUSER&#x27;)</span></span><br></pre></td></tr></table></figure>

<h2 id="유저-그룹-Database-정보"><a href="#유저-그룹-Database-정보" class="headerlink" title="유저, 그룹, Database 정보"></a>유저, 그룹, Database 정보</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 전체 DATABASE</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">DATABASE</span></span><br><span class="line"><span class="keyword">FROM</span> _V_DATABASE</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 현재 유저가 접근할수 있는 Database 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  OBJECTNAME <span class="keyword">AS</span> <span class="keyword">DATABASE</span></span><br><span class="line"><span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line"><span class="keyword">WHERE</span> OBJECTTYPE = <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> OBJECTNAME &lt;&gt; <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> USERNAME = &#123;account_name&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 해당 유저의 소속 그룹 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME <span class="keyword">AS</span> ACCOUNT_NAME,</span><br><span class="line">  B.GROUPNAME <span class="keyword">AS</span> GROUP_NAME</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A, _V_USERGROUPS B</span><br><span class="line"><span class="keyword">WHERE</span> A.USERNAME = B.USERNAME</span><br><span class="line"><span class="keyword">AND</span> A.USERNAME = &#123;account_name&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 해당 그룹에 소속된 유저 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME <span class="keyword">AS</span> ACCOUNT_NAME,</span><br><span class="line">  B.GROUPNAME <span class="keyword">AS</span> GROUP_NAME</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A, _V_USERGROUPS B</span><br><span class="line"><span class="keyword">WHERE</span> A.USERNAME = B.USERNAME</span><br><span class="line"><span class="keyword">AND</span> B.GROUPNAME = &#123;group_name&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 전체 그룹정보</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> GRORSGPECENT = <span class="number">0</span></span><br><span class="line">    <span class="keyword">THEN</span> <span class="string">&#x27;User Group&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;Resource Group&#x27;</span></span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> GROUP_TYPE,</span><br><span class="line">  GROUPNAME <span class="keyword">AS</span> GROUP_NAME,</span><br><span class="line">  TO_CHAR(DATETIME(CREATEDATE), <span class="string">&#x27;YYYYMMDDHH24MISS&#x27;</span>) <span class="keyword">AS</span> CREATE_DATE</span><br><span class="line"><span class="keyword">FROM</span> _V_GROUP</span><br><span class="line"><span class="comment">-- AND GROUPNAME = UPPER(&#123;group_name&#125;)</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>, <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 전체 DATABASE</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">DATABASE</span></span><br><span class="line"><span class="keyword">FROM</span> _V_DATABASE</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 현재 유저가 접근할수 있는 Database 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  OBJECTNAME <span class="keyword">AS</span> <span class="keyword">DATABASE</span></span><br><span class="line"><span class="keyword">FROM</span> _V_USER_PRIV</span><br><span class="line"><span class="keyword">WHERE</span> OBJECTTYPE = <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> OBJECTNAME &lt;&gt; <span class="string">&#x27;DATABASE&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> USERNAME = <span class="string">&#x27;TESTUSER&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 해당 유저의 소속 그룹 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME <span class="keyword">AS</span> ACCOUNT_NAME,</span><br><span class="line">  B.GROUPNAME <span class="keyword">AS</span> GROUP_NAME</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A, _V_USERGROUPS B</span><br><span class="line"><span class="keyword">WHERE</span> A.USERNAME = B.USERNAME</span><br><span class="line"><span class="keyword">AND</span> A.USERNAME = <span class="string">&#x27;TESTUSER&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 해당 그룹에 소속된 유저 조회</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  A.USERNAME <span class="keyword">AS</span> ACCOUNT_NAME,</span><br><span class="line">  B.GROUPNAME <span class="keyword">AS</span> GROUP_NAME</span><br><span class="line"><span class="keyword">FROM</span> _V_USER A, _V_USERGROUPS B</span><br><span class="line"><span class="keyword">WHERE</span> A.USERNAME = B.USERNAME</span><br><span class="line"><span class="keyword">AND</span> B.GROUPNAME = <span class="string">&#x27;TESTGROUP&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 전체 그룹정보</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  (<span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> GRORSGPECENT = <span class="number">0</span></span><br><span class="line">    <span class="keyword">THEN</span> <span class="string">&#x27;User Group&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;Resource Group&#x27;</span></span><br><span class="line">  <span class="keyword">END</span>) <span class="keyword">AS</span> GROUP_TYPE,</span><br><span class="line">  GROUPNAME <span class="keyword">AS</span> GROUP_NAME,</span><br><span class="line">  TO_CHAR(DATETIME(CREATEDATE), <span class="string">&#x27;YYYYMMDDHH24MISS&#x27;</span>) <span class="keyword">AS</span> CREATE_DATE</span><br><span class="line"><span class="keyword">FROM</span> _V_GROUP</span><br><span class="line"><span class="comment">-- AND GROUPNAME = UPPER(&#x27;TESTGROUP&#x27;)</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>, <span class="number">2</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
        <tag>Info</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - 유저 관련 SQL</title>
    <url>/2018/01/29/dev/database/ibm_pda/ibm_netezza_user_sql/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 유저 관련 SQL입니다</p>
<h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> <span class="keyword">PASSWORD</span> &#123;<span class="keyword">password</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 삭제</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> &#123;account_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 패스워드 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> <span class="keyword">PASSWORD</span> &#123;<span class="keyword">password</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 만료기간 지정</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> VALID <span class="keyword">UNTIL</span> &#123;<span class="built_in">date</span>(yyyy-mm-dd hh:mm:ss)&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 만료기간 제거</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> VALID <span class="keyword">UNTIL</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 비밀번호 즉시 만료 (비밀번호 만료시 password를 변경하여 해제 가능)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">EXPIRE</span> <span class="keyword">PASSWORD</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> <span class="keyword">PASSWORD</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 삭제</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> TESTUSER;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 패스워드 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> <span class="keyword">PASSWORD</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 만료기간 지정</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> VALID <span class="keyword">UNTIL</span> <span class="string">&#x27;2018-01-29 23:59:59&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 만료기간 제거</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> VALID <span class="keyword">UNTIL</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저 계정 비밀번호 즉시 만료 (비밀번호 만료시 password를 변경하여 해제 가능)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">EXPIRE</span> <span class="keyword">PASSWORD</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>User</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
      </tags>
  </entry>
  <entry>
    <title>IBM PDA Netezza - 유저와 그룹 연계 관련 SQL</title>
    <url>/2018/01/29/dev/database/ibm_pda/ibm_netezza_user_group_sql/</url>
    <content><![CDATA[<p>IBM PDA (Pure Data Analytics) NETEZZA 의 유저와 그룹 연계 관련 SQL이다.</p>
<h2 id="유저와-그룹-연계"><a href="#유저와-그룹-연계" class="headerlink" title="유저와 그룹 연계"></a>유저와 그룹 연계</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저에게 일반 그룹 부여</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> <span class="keyword">IN</span> <span class="keyword">GROUP</span> &#123;group_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저에게 리소스 그룹 부여</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &#123;account_name&#125; <span class="keyword">WITH</span> <span class="keyword">IN</span> RESOURCEGROUP &#123;resourcegroup_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 그룹에 소속된 유저 제외 (일반 그룹과 리소스 그룹 모두 해당)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> &#123;group_name&#125; <span class="keyword">WITH</span> <span class="keyword">DROP</span> <span class="keyword">USER</span> &#123;account_name&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 유저에게 일반 그룹 부여</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> <span class="keyword">IN</span> <span class="keyword">GROUP</span> TESTGROUP;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유저에게 리소스 그룹 부여</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> TESTUSER <span class="keyword">WITH</span> <span class="keyword">IN</span> RESOURCEGROUP TESTRESOURCEGROUP;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 그룹에 소속된 유저 제외 (일반 그룹과 리소스 그룹 모두 해당)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> TESTGROUP <span class="keyword">WITH</span> <span class="keyword">DROP</span> <span class="keyword">USER</span> TESTUSER;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">GROUP</span> TESTRESOURCEGROUP <span class="keyword">WITH</span> <span class="keyword">DROP</span> <span class="keyword">USER</span> TESTUSER;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>IBM PDA</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>User</tag>
        <tag>IBM PDA</tag>
        <tag>NETEZZA</tag>
        <tag>Group</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle to Tibero Migration SQL</title>
    <url>/2017/08/24/dev/database/migration/oracle_to_tibero_migration_sql/</url>
    <content><![CDATA[<p>프로젝트에서 기존 사용하던 Oracle License를 다른 서비스에서 사용하기로 하여<br>Oracle 에서 Tibero 이관작업을 진행하면서 내용들을 정리한 내용입니다.</p>
<h2 id="Escalation"><a href="#Escalation" class="headerlink" title="Escalation"></a>Escalation</h2><h3 id="Insert-SQL"><a href="#Insert-SQL" class="headerlink" title="Insert SQL"></a>Insert SQL</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- AS-IS : Oracle</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">SERVER</span> (</span><br><span class="line">	<span class="keyword">ID</span></span><br><span class="line">	, CODE</span><br><span class="line">	, HOSTNAME</span><br><span class="line">	, <span class="keyword">STATUS</span></span><br><span class="line">	, <span class="keyword">COMMENT</span></span><br><span class="line">) <span class="keyword">VALUES</span> (</span><br><span class="line">	?, ?, ?, ?, EMPTY_CLOB()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">COMMENT</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">SERVER</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">UPDATE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- TO-BE : Tibero</span></span><br><span class="line"><span class="comment">-- (1) Oracle과 다르게 최초 초기화 하지 않고 직접 Bind 할수있습니다.</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">SERVER</span> (</span><br><span class="line">	<span class="keyword">ID</span></span><br><span class="line">	, CODE</span><br><span class="line">	, HOSTNAME</span><br><span class="line">	, <span class="keyword">STATUS</span></span><br><span class="line">	, <span class="keyword">COMMENT</span></span><br><span class="line">) <span class="keyword">VALUES</span> (</span><br><span class="line">	?, ?, ?, ?, ?</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Tibero는 COMMENT를 SQL에서 BIND할수 있지만 개인적으론 동일하게 EMPTY_CLOB() 초기화를 추천합니다.</span></span><br><span class="line"><span class="comment">-- (2) 초기화 후 할 경우</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">SERVER</span> <span class="keyword">SET</span></span><br><span class="line">	<span class="keyword">COMMENT</span> = ?</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br></pre></td></tr></table></figure>

<h3 id="Insert-Logic"><a href="#Insert-Logic" class="headerlink" title="Insert Logic"></a>Insert Logic</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AS-IS : Oracle</span></span><br><span class="line">String comment = <span class="string">&quot;Server Commnet&quot;</span>; <span class="comment">// input comment</span></span><br><span class="line">CLOB clob = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">pstmt = con.prepareStatement(sql);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, id);</span><br><span class="line">rs = pstmt.executeQuery();</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">	clob = ((OracleResultSet)rs).getCLOB(<span class="string">&quot;COMMENT&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> chunk = clob.getChunkSize();</span><br><span class="line">	<span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[chunk];</span><br><span class="line">	Writer writer = clob.getCharacterOutputStream();</span><br><span class="line">	StringReader sr = <span class="keyword">new</span> StringReader(comment);</span><br><span class="line">	<span class="keyword">while</span> ((length = sr.read(buffer, <span class="number">0</span>, chunk)) != -<span class="number">1</span>) &#123;</span><br><span class="line">		writer.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">	&#125;</span><br><span class="line">	sr.close();</span><br><span class="line">	writer.close();</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// TO-BE : Tibero</span></span><br><span class="line"><span class="comment">// (1) Oracle과 다르게 최초 초기화 하지않고 직접 Bind 할수있습니다.</span></span><br><span class="line">String comment = <span class="string">&quot;Master Server&quot;</span>; <span class="comment">// input comment</span></span><br><span class="line"></span><br><span class="line">pstmt = con.prepareStatement(sql);</span><br><span class="line">StringReader srClob = <span class="keyword">new</span> StringReader(comment);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, id);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, code);</span><br><span class="line">pstmt.setString(<span class="number">3</span>, hostname);</span><br><span class="line">pstmt.setString(<span class="number">4</span>, status);</span><br><span class="line">pstmt.setCharacterStream(<span class="number">5</span>, srClob, comment.getBytes().length);</span><br><span class="line">pstmt.executeUpdate();</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2) 초기화 후 할 경우</span></span><br><span class="line">String comment = <span class="string">&quot;Master Server&quot;</span>; <span class="comment">// input comment</span></span><br><span class="line"></span><br><span class="line">pstmt = con.prepareStatement(sql);</span><br><span class="line">StringReader srClob = <span class="keyword">new</span> StringReader(comment);</span><br><span class="line">pstmt.setCharacterStream(<span class="number">1</span>, srClob, comment.getBytes().length);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, id);</span><br><span class="line">pstmt.executeUpdate();</span><br></pre></td></tr></table></figure>

<h3 id="Select-SQL"><a href="#Select-SQL" class="headerlink" title="Select SQL"></a>Select SQL</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- SQL은 변동 사항이 없습니다.</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">COMMENT</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">SERVER</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br></pre></td></tr></table></figure>

<h3 id="Select-Logic"><a href="#Select-Logic" class="headerlink" title="Select Logic"></a>Select Logic</h3><p>주의할점은 Tibero에서 사용하는 CLOB class가 틀리며 Method 대소문자도 틀리므로<br>소스단위에서 정확하게 수정해야합니다.<br>그리고 Tibero에서 TbClob가 null이 아니며 length가 0 이상일때만 값을 세팅하는 이유는<br>Tibero 자체 버그때문에 Null이 아니더라도 length가 0일때가 있으며<br>0일때 단순한 white space가 아닌 이상한 쓰레기 값이 들어올 때가 있기 때문에 주의해야합니다.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AS-IS : Oracle</span></span><br><span class="line">CLOB clobComment = <span class="keyword">null</span>;</span><br><span class="line">String comment = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">	clobComment = ((OracleResultSet)rs).getCLOB(<span class="string">&quot;COMMENT&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (clobComment != <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">int</span> textLength = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> chunk = clobComment.getChunkSize();</span><br><span class="line">		<span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[chunk];</span><br><span class="line">		StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line">		Reader reader = clobComment.getCharacterStream();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> ((textLength = reader.read(bufffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">			sw.write(buffer, <span class="number">0</span>, textLength);</span><br><span class="line">		&#125;</span><br><span class="line">		comment = sw.toString();</span><br><span class="line">		sw.close();</span><br><span class="line">		reader.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TO-BE : Tibero</span></span><br><span class="line">TbClob clobComment = <span class="keyword">null</span>; <span class="comment">//BLOB 일때는 TbBlob</span></span><br><span class="line">String comment = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">	clobComment = (TbClog)((TbResultSet)rs).getClob(<span class="string">&quot;COMMENT&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> lobLength = clobComment.length();</span><br><span class="line">	<span class="keyword">if</span> (clobComment != <span class="keyword">null</span> &amp;&amp; lobLength &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">int</span> textLength = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[lobLength];</span><br><span class="line">		StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line">		Reader reader = clobComment.getCharacterStream();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> ((textLength = reader.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">			sw.write(buffer, <span class="number">0</span>, textLength);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		comment = sw.toString();</span><br><span class="line">		sw.close();</span><br><span class="line">		reader.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Update-SQL"><a href="#Update-SQL" class="headerlink" title="Update SQL"></a>Update SQL</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- AS-IS : Oracle</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">SERVER</span> <span class="keyword">SET</span></span><br><span class="line">	CODE = ?,</span><br><span class="line">	HOSTNAME = ?,</span><br><span class="line">	<span class="keyword">STATUS</span> = ?,</span><br><span class="line">	<span class="keyword">COMMENT</span> = EMPTY_CLOB()</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">COMMENT</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">SERVER</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">UPDATE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- TO-BE : Tibero</span></span><br><span class="line"><span class="comment">-- 초기화 동시에 세팅</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">SERVER</span> <span class="keyword">SET</span></span><br><span class="line">	CODE = ?,</span><br><span class="line">	HOSTNAME = ?,</span><br><span class="line">	<span class="keyword">STATUS</span> = ?,</span><br><span class="line">	<span class="keyword">COMMENT</span> = ?</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Oracle과 동일하게 EMPTY_CLOB()로 초기화 후 UPDATE도 가능합니다</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">SERVER</span> <span class="keyword">SET</span></span><br><span class="line">	<span class="keyword">COMMENT</span> = ?</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">ID</span> = ?</span><br></pre></td></tr></table></figure>

<h3 id="Update-Logic"><a href="#Update-Logic" class="headerlink" title="Update Logic"></a>Update Logic</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AS-IS : Oracle</span></span><br><span class="line">CLOB clobComment = <span class="keyword">null</span>;</span><br><span class="line">String comment = <span class="string">&quot;Update Server Comment&quot;</span>; <span class="comment">// Comment</span></span><br><span class="line"></span><br><span class="line">pstmt = con.prepareStatement(sql);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, id);</span><br><span class="line">rs = pstmt.executeQuery();</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">	clobComment = ((OracleResultSet)rs).getCLOB(<span class="string">&quot;COMMENT&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> chunk = clobComment.getChunkSize();</span><br><span class="line">	<span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[chunk];</span><br><span class="line">	Writer writer = clobComment.getCharacterOutputStream();</span><br><span class="line">	StringReader reader = <span class="keyword">new</span> StringReader(comment);</span><br><span class="line">	<span class="keyword">while</span> ((length = reader.read(buffer, <span class="number">0</span>, chunk)) != -<span class="number">1</span>) &#123;</span><br><span class="line">		writer.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">	&#125;</span><br><span class="line">	reader.close();</span><br><span class="line">	writer.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TO-BE : Tibero</span></span><br><span class="line">pstmt = con.prepareStatement(sql);</span><br><span class="line">StringReader srClob = <span class="keyword">new</span> StringReader(comment);</span><br><span class="line">pstmt.setCharacterStream(<span class="number">1</span>, srClob, comment.getBytes().length);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, id);</span><br><span class="line">pstmt.executeUpdate();</span><br></pre></td></tr></table></figure>

<h3 id="Delete-SQL-amp-Logic"><a href="#Delete-SQL-amp-Logic" class="headerlink" title="Delete SQL &amp; Logic"></a>Delete SQL &amp; Logic</h3><p>Row Delete는 기존과 동일하므로 생략.</p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Migration</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Migration</tag>
        <tag>Oracle</tag>
        <tag>Tibero</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle lock select and clear</title>
    <url>/2017/08/24/dev/database/oracle/oracle_lock_select_and_clear/</url>
    <content><![CDATA[<h2 id="Lock-Select-SQL"><a href="#Lock-Select-SQL" class="headerlink" title="Lock Select SQL"></a>Lock Select SQL</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- DB SESSION CHECK</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> V$<span class="keyword">SESSION</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- DB SESSION QUERY</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	A.SID,		<span class="comment">-- SID</span></span><br><span class="line">	A.SERIAL<span class="comment">#,	-- 시리얼번호</span></span><br><span class="line">	A.STATUS,	<span class="comment">-- 상태정보</span></span><br><span class="line">	A.PROCESS,	<span class="comment">-- 프로세스정보</span></span><br><span class="line">	A.USERNAME,	<span class="comment">-- 유저</span></span><br><span class="line">	A.OSUSER,	<span class="comment">-- 접속자의 OS 사용자 정보</span></span><br><span class="line">	B.SQL_TEXT,	<span class="comment">-- SQL</span></span><br><span class="line">	C.PROGRAM	<span class="comment">-- 접속 프로그램</span></span><br><span class="line"><span class="keyword">FROM</span> V$<span class="keyword">SESSION</span> A, V$SQLAREA B, V$PROCESS C</span><br><span class="line"><span class="keyword">WHERE</span> A.SQL_HASH_VALUE = B.HASH_VALUE</span><br><span class="line"><span class="keyword">AND</span> A.SQL_ADDRESS = B.ADDRESS</span><br><span class="line"><span class="keyword">AND</span> A.PADDR = C.ADDR</span><br><span class="line"><span class="keyword">AND</span> A.STATUS = <span class="string">&#x27;ACTIVE&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- USER SESSION KILL</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">KILL</span> <span class="keyword">SESSION</span> <span class="string">&#x27;SID, 시리얼번호&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SELECT &amp; KILL SQL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">DISTINCT</span> X.SESSION_ID</span><br><span class="line">	, A.SERIAL<span class="comment">#,</span></span><br><span class="line">	, D.OBJECT_NAME</span><br><span class="line">	, A.MACHINE</span><br><span class="line">	, A.TERMINAL</span><br><span class="line">	, A.PROGRAM</span><br><span class="line">	, A.LOGON_TIME</span><br><span class="line">	, <span class="string">&#x27;ALTER SYSTEM KILL SESSION &#x27;&#x27;&#x27;</span> || A.SID || <span class="string">&#x27;,  &#x27;</span> || A.SERIAL<span class="comment"># || &#x27;&#x27;&#x27;;&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> GV$LOCKED_OBJECT X, GV$<span class="keyword">SESSION</span> A,  DBA_OBJECTS D</span><br><span class="line"><span class="keyword">WHERE</span> X.SESSION_ID = A.SID</span><br><span class="line"><span class="keyword">AND</span> X.OBJECT_ID = D.OBJECT_ID</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> LOGON_TIME;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Oracle</tag>
        <tag>Lock</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle Use Instant Client</title>
    <url>/2017/08/24/dev/database/oracle/oracle_use_instant_client/</url>
    <content><![CDATA[<p>Oracle Client Potable 이라고 지칭 하는건 따로 존재하지 않고<br>Instant Client Version이 존재하며 다운페이지는 다음과 같습니다.<br><a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Oracle Instant Client</a></p>
<h2 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h2><p>설명하는 환경은 Windows 64bit에서 Toad사용 기준 설명입니다.</p>
<ol>
<li>Instant Client for Microsoft Windows</li>
<li>32bit, 64bit는 Toad의 Version에 맞춰 다운로드<ul>
<li>Windows 64bit, Toad 32bit라면<br>Instant Client for Microsoft Windows (32-bit)를 Download하여 설치합니다</li>
<li>Cannot load OCI DLL<br>C:\oracle\product\11.2.0\client_1\oci.dll<br>DB연결시 OCI.dll 에러가 날시 toad와 client 버전이 맞지 않는다는 의미입니다.</li>
</ul>
</li>
<li>Download file을 적당한 위치에 압축해제<ul>
<li>ex) C:\oracle\product\11.2.0\client_1</li>
</ul>
</li>
<li>환경변수 설정 : 시스템 변수에 아래의 내용을 추가합니다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ORACLE_HOME : C:\oracle\product\11.2.0\client_1</span><br><span class="line">TNS_ADMIN : C:\oracle\product\11.2.0\client_1\network\admin\</span><br><span class="line">Path : C:\oracle\product\11.2.0\client_1</span><br><span class="line">NLS_LANG : KOREAN_KOREA.KO16MSWIN949</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>주의 사항<br>위의 환경변수 path는 예제일뿐 동일하게 해서는 안됩니다.<br>Path가 기존에 존재 하는경우 수정을 해야하는데 예를들어<br>C:\example 이 존재한다면 구분자로 “;”을 추가하여 다음과 같이 변경해야 합니다.<br>C:\example<font color="red"><strong>;</strong></font>C:\oracle\product\11.2.0\client_1</li>
</ol>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Oracle</tag>
        <tag>Instant Client</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle ODBC for Windows</title>
    <url>/2017/09/08/dev/database/oracle/oracle_odbc/</url>
    <content><![CDATA[<p>Windows에서 ODBC connect 설정 중 목록에서 설치한 Oracle이 나오지 않을때<br>Oracle ODBC 설치및 Registry key 등록에 관한 설정 내용입니다.</p>
<h2 id="ODBC-Download"><a href="#ODBC-Download" class="headerlink" title="ODBC Download"></a>ODBC Download</h2><p>Download path는 다음과 같으며 URL이 깨진 경우 “Oracle ODBC” 검색시 찾을수 있습니다.<br><a href="http://www.oracle.com/technetwork/database/windows/index-098976.html">Oracle ODBC</a></p>
<p>기본적인 Oracle을 설치했다면 ODBC가 포함되어 설치 되었을수도 있으며<br>Oracle Instant Client를 사용중이라면 ODBC는 개별로 설치해야합니다.</p>
<h2 id="ODBC-Install"><a href="#ODBC-Install" class="headerlink" title="ODBC Install"></a>ODBC Install</h2><p>설치는 의외로 매우 간단합니다.</p>
<ul>
<li>Download 받은 파일을 Oracle이 설치된 경로에 압축 해제.</li>
<li>odbc_install.exe를 실행하여 설치.</li>
</ul>
<h2 id="ODBC-Regstry-key"><a href="#ODBC-Regstry-key" class="headerlink" title="ODBC Regstry key"></a>ODBC Regstry key</h2><p>다음과 같은 파일을 생성합니다 (실제 파일명은 어떻게 해도 무관하다.)</p>
<ul>
<li>ODBC_Drivers_reg_value.reg<br>Oracle 11_2_0 기준으로 해당 버전을 기준으로 하겠습니다.<br>(내용의 버전은 각각 환경에 맞춰 변경하면되며 regstry key의 name입니다.)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line">[HKEY_LOCAL_MACHILE\SOFTWARE\Wow6432Node\ODBC\ODBCINST.INI\ODBC Drivers]</span><br><span class="line">&quot;Oracle 11_2_0&quot;&#x3D;&quot;Installed&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>Oracle_reg_value.reg</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ODBC\ODBCINST.INI\Oracle 11_2_0]</span><br><span class="line">&quot;APILevel&quot;&#x3D;&quot;1&quot;</span><br><span class="line">&quot;ConnectionFunctions&quot;&#x3D;&quot;YYY&quot;</span><br><span class="line">&quot;CPTimeout&quot;&#x3D;&quot;60&quot;</span><br><span class="line">&quot;Driver&quot;&#x3D;&quot;C:\\oracle\\product\\11.2.0\\client_1\\SQORA32.dll&quot;</span><br><span class="line">&quot;DriverODBCVer&quot;&#x3D;&quot;03.51&quot;</span><br><span class="line">&quot;FileUsage&quot;&#x3D;&quot;0&quot;</span><br><span class="line">&quot;Setup&quot;&#x3D;&quot;C:\\oracle\\product\\11.2.0\\client_1\\SQORAS32.dll&quot;</span><br><span class="line">&quot;SQLLevel&quot;&#x3D;&quot;1&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>2번 라인의 [HKEY..]의 Oracle 11_2_0은 환경에 따라 틀리며 ODBC_Drivers_reg_value.reg파일 내용의 명과 동일 해야합니다.</li>
<li>6번 라인의 Driver는 ODBC를 압축 해제 시 추가되는 파일 중 하나인 SQORA32.dll 을 입력합니다.</li>
<li>9번 라인의 Setup은 ODBC를 압축 해제 시 추가 되는 파일 중 하나인 SQORAS32.dll을 입력합니다. (파일명이 SQORA32.dll과 SQORAS32.dll은 틀리므로 주의해야합니다.)</li>
</ul>
</blockquote>
<h2 id="ODBC-Regsty-key-file-execute"><a href="#ODBC-Regsty-key-file-execute" class="headerlink" title="ODBC Regsty key file execute"></a>ODBC Regsty key file execute</h2><p>앞서 만든 reg파일을 실행하는 순서는 다음과 같으며 꼭 순서대로 실행해야 합니다</p>
<ol>
<li>ODBC_Drivers_reg_value.reg</li>
<li>Oracle_reg_value.reg</li>
</ol>
]]></content>
      <categories>
        <category>Dev</category>
        <category>Database</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>Oracle</tag>
        <tag>Windows</tag>
        <tag>ODBC</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS - Scale Down</title>
    <url>/2019/04/20/dev/devops/aws/scalability/scale_down/rds_scale_down/</url>
    <content><![CDATA[<p>해당 내용은 RDS의 정보를 수정하여 AWS RDS Scale Down 하는 작업입니다.<br>보통 <code>DB 인스턴스 클래스</code>를 낮추는 작업과<br>유지비용을 낮추기 위해 <code>다중 AZ 배포</code>를 비활성화 및 <code>스토리지 유형</code>을 바꾸는 작업이 있습니다.<br>이 글은 DB 인스턴스 클래스를 낮추는 작업으로 진행됩니다.<br>사내 컨플 작성용 내용을 블로그에 올리기위해 blur 처러 된 이미지가 존재합니다.</p>
<hr>
<h1 id="RDS-Scale-Down"><a href="#RDS-Scale-Down" class="headerlink" title="RDS Scale Down"></a>RDS Scale Down</h1><h2 id="설정하려는-Database를-찾아-이동"><a href="#설정하려는-Database를-찾아-이동" class="headerlink" title="설정하려는 Database를 찾아 이동."></a>설정하려는 Database를 찾아 이동.</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/1.jpg" alt="1"><br><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/2.jpg" alt="2"></p>
<hr>
<h2 id="해당-Database를-선택하여-상세-이동"><a href="#해당-Database를-선택하여-상세-이동" class="headerlink" title="해당 Database를 선택하여 상세 이동"></a>해당 Database를 선택하여 상세 이동</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/3.jpg" alt="3"></p>
<hr>
<h2 id="수정화면으로-이동"><a href="#수정화면으로-이동" class="headerlink" title="수정화면으로 이동"></a>수정화면으로 이동</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/4.jpg" alt="4"></p>
<hr>
<h2 id="기존-db-t2-large에서-db-t2-medium으로-변경"><a href="#기존-db-t2-large에서-db-t2-medium으로-변경" class="headerlink" title="기존 db.t2.large에서 db.t2.medium으로 변경"></a>기존 <code>db.t2.large</code>에서 <code>db.t2.medium</code>으로 변경</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/5.jpg" alt="5"><br><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/6.jpg" alt="6"></p>
<hr>
<h2 id="모든-수정사항-변경-후-계속"><a href="#모든-수정사항-변경-후-계속" class="headerlink" title="모든 수정사항 변경 후 계속"></a>모든 수정사항 변경 후 계속</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/7.jpg" alt="7"></p>
<hr>
<h2 id="DB-인스턴스-수정-적용"><a href="#DB-인스턴스-수정-적용" class="headerlink" title="DB 인스턴스 수정 적용"></a>DB 인스턴스 수정 적용</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/8.jpg" alt="8"><br><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/9.jpg" alt="9"></p>
<ul>
<li>예약된 다음 유지 관리 기간에 적용 같은 경우 시간만 예약될 뿐이며,<br>즉시 적용과 같은 0.1초 정도의 down time은 똑같이 발생합니다<br>(운영시간이 아닐때 예약 변경시 활용)</li>
<li>즉시 적용 같은 경우 바로 진행 되며 0.1초 정도의 down time이 발생</li>
</ul>
<hr>
<h2 id="변경-중"><a href="#변경-중" class="headerlink" title="변경 중"></a>변경 중</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/10.jpg" alt="10"></p>
<hr>
<h2 id="변경-완료-확인"><a href="#변경-완료-확인" class="headerlink" title="변경 완료 확인"></a>변경 완료 확인</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_down/rds_scale_down/11.jpg" alt="11"></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Scalability</category>
        <category>ScaleDown</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Scalability</tag>
        <tag>ScaleDown</tag>
        <tag>RDS</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 - Scale In</title>
    <url>/2019/04/20/dev/devops/aws/scalability/scale_in/ec2_scale_in/</url>
    <content><![CDATA[<p>해당 내용은 EC2 Scale In이며<br>만약 Nginx, Apache 웹서버가 아닌 ELB에서 load balancing하는 경우에는<br><a href="/2019/04/20/dev/infra/aws/scalability/scale_in/elb/">Scale In - ELB</a>를 함께 참조하세요.<br>내용은 전반적으로 AWS Console에서만 하는 내용이 아닌 직접 서버에서 command를 사용하는 내용도 포함되어있습니다.<br>shell에서 command를 사용하는 경우는 EC2를 임시 중지하여 다시 Scale Out 하려할 때와<br>수행 후 종료를 할때도 더 안전하고 빠르게 종료 가능합니다,<br>어떻게 보면 command 부분은 무시하고 AWS Console 작업만 해도 무방합니다.<br>command 사용은 AWS Cloud가 아닌 물리 Rack Server 사용시 안전한 재부팅, 종료시의 본인의 경험기반 입니다.<br>케이스는 nginx와 java application이 포함된 5개의 EC2를 3개로 줄이려는 작업니다.</p>
<hr>
<h1 id="Scale-In-EC2-Instance"><a href="#Scale-In-EC2-Instance" class="headerlink" title="Scale In - EC2 Instance"></a>Scale In - EC2 Instance</h1><h2 id="Server-Resource-정리"><a href="#Server-Resource-정리" class="headerlink" title="Server Resource 정리"></a>Server Resource 정리</h2><h3 id="Nginx-종료"><a href="#Nginx-종료" class="headerlink" title="Nginx 종료"></a>Nginx 종료</h3><h4 id="Case-Service"><a href="#Case-Service" class="headerlink" title="Case : Service"></a>Case : Service</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo service nginx stop</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>sudo service nginx stop</code> Nginx 사용시 sudo 권한으로 서비스 정지</li>
</ul>
<h4 id="Case-특정-user에게-권한-부여된-경우"><a href="#Case-특정-user에게-권한-부여된-경우" class="headerlink" title="Case : 특정 user에게 권한 부여된 경우"></a>Case : 특정 user에게 권한 부여된 경우</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo su - app</span></span><br><span class="line"><span class="meta">[app]$</span><span class="bash"> sudo nginx -s stop</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 또는</span></span><br><span class="line"><span class="meta">[app]$</span><span class="bash"> sudo nginx -s quit</span></span><br></pre></td></tr></table></figure>
<ul>
<li>특정 User에게 Nginx 권한을 부여한 경우 서비스 정지 하는 방법.</li>
<li><code>sudo nginx -s stop</code> stop 명령어는 프로세스를 바로 종료</li>
<li><code>sudo nginx -s quit</code> quit 명령어는 현재 연결중인 커넥션이 모두 끊어질때 까지 기다린 후 종료</li>
</ul>
<h3 id="Java-application-종료"><a href="#Java-application-종료" class="headerlink" title="Java application 종료"></a>Java application 종료</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo su - app</span></span><br><span class="line"><span class="meta">[app]$</span><span class="bash"> ps -ef | grep java</span></span><br><span class="line">app    5589     1  0 14:21 ?        00:00:48 java -jar</span><br><span class="line">... /home/app/api.app.com/app/app-0.0.1-SNAPSHOT.jar</span><br><span class="line">app    6436  6398  0 17:05 pts/0    00:00:00 grep --color=auto java</span><br><span class="line"><span class="meta">[app]$</span><span class="bash"> <span class="built_in">kill</span> -15 5589</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 또는</span></span><br><span class="line"><span class="meta">[app]$</span><span class="bash"> <span class="built_in">kill</span> -9 5589</span></span><br></pre></td></tr></table></figure>
<ul>
<li>java application process 확인</li>
<li>해당 process id의 process 종료</li>
<li><code>kill -15 5589</code> -15 옵션은 application 자체의 pre destroy 수행 및 정상적인 종료를 의도</li>
<li><code>kill -9 5589</code> -9 옵션은 강제 종료</li>
<li>종료 명령어 후 application process를 재확인하여 종료되었는지 확인이 필요함.</li>
</ul>
<h3 id="Memory-sync"><a href="#Memory-sync" class="headerlink" title="Memory sync"></a>Memory sync</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo su</span></span><br><span class="line"><span class="meta">[root]$</span><span class="bash"> <span class="built_in">cd</span> /</span></span><br><span class="line"><span class="meta">[root]$</span><span class="bash"> sync;sync;sync</span></span><br></pre></td></tr></table></figure>
<ul>
<li>memory buffer에 존재 하다가 특정 부분에서 저장되는 어플리케이션이 존재하는 경우 시스템을 재부팅 및 종료 하기전에 강제로 저장하게끔 하기 위한 작업</li>
<li>반드시 root 계정으로 “/“ 위치에서 해야합니다.</li>
<li>커널 파일 시스템의 메모리 버퍼를 예약된 데이터로 커밋</li>
<li>이 작업을 하지 않고 중지 및 종료시 어떤 데이터로 저장이 되기전에 메모리 버퍼에서 날라가는 경우가 발생 할 수 있음.</li>
<li>EC2를 종료하여 인스턴스를 삭제 하는 작업도 빠르게 하기 위함도 있지만 임시 중지 하고자 할때 좋음.</li>
</ul>
<hr>
<h2 id="중지-또는-종료하려는-EC2를-찾아-이동"><a href="#중지-또는-종료하려는-EC2를-찾아-이동" class="headerlink" title="중지 또는 종료하려는 EC2를 찾아 이동"></a>중지 또는 종료하려는 EC2를 찾아 이동</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/1.jpg" alt="1"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/2.jpg" alt="2"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/3.jpg" alt="3"></p>
<hr>
<h2 id="중지-또는-종료하려는-EC2-검색"><a href="#중지-또는-종료하려는-EC2-검색" class="headerlink" title="중지 또는 종료하려는 EC2 검색"></a>중지 또는 종료하려는 EC2 검색</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/4.jpg" alt="4"></p>
<hr>
<h2 id="중지-또는-종료하려는-EC2-선택"><a href="#중지-또는-종료하려는-EC2-선택" class="headerlink" title="중지 또는 종료하려는 EC2 선택"></a>중지 또는 종료하려는 EC2 선택</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/5.jpg" alt="5"></p>
<hr>
<h2 id="선택한-EC2를-중지-또는-종료"><a href="#선택한-EC2를-중지-또는-종료" class="headerlink" title="선택한 EC2를 중지 또는 종료"></a>선택한 EC2를 중지 또는 종료</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/6.jpg" alt="6"></p>
<hr>
<h2 id="중지-또는-종료"><a href="#중지-또는-종료" class="headerlink" title="중지 또는 종료"></a>중지 또는 종료</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/7.jpg" alt="7"></p>
<ul>
<li>중지 또는 종료시 신중함이 필요합니다.<br>(잘못된 EC2 선택시 운영 중인 서비스의 down time을 초래하여 사용자에게는 장애를 발생시키기 때문에 확인 또 확인.)</li>
</ul>
<hr>
<h2 id="종료-진행-중"><a href="#종료-진행-중" class="headerlink" title="종료 진행 중"></a>종료 진행 중</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/8.jpg" alt="8"></p>
<ul>
<li>종료 진행 중</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/9.jpg" alt="9"></p>
<ul>
<li>종료 완료</li>
<li>종료 완료 후 일정 시간이 지나면 인스턴스 자체가 사라집니다.</li>
</ul>
<hr>
<h2 id="종료-완료-및-인스턴스-없어짐-확인"><a href="#종료-완료-및-인스턴스-없어짐-확인" class="headerlink" title="종료 완료 및 인스턴스 없어짐 확인."></a>종료 완료 및 인스턴스 없어짐 확인.</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/ec2_scale_in/10.png" alt="10"> </p>
<hr>
<h2 id="연관된-Jenkins-관련-정보-제거"><a href="#연관된-Jenkins-관련-정보-제거" class="headerlink" title="연관된 Jenkins 관련 정보 제거"></a>연관된 Jenkins 관련 정보 제거</h2><ul>
<li>배포 클러스터링 관리가 Jenkins에서 하였다면 Jenkins에서 제외</li>
<li>Script에서 하였다면 Script에서 해당 EC2 Instance 제외 </li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Scalability</category>
        <category>ScaleIn</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>ScaleIn</tag>
      </tags>
  </entry>
  <entry>
    <title>ELB - Scale In</title>
    <url>/2019/04/20/dev/devops/aws/scalability/scale_in/elb_scale_in/</url>
    <content><![CDATA[<p>해당 내용은 Scale In 자체라기 보다는 Load Balance에서 특정 EC2를 제외하는 내용입니다.<br>다만 Nginx, Apache 웹서버가 아닌 ELB에서 하나의 서비스를 여러 EC2로 load balancing하는 경우<br>Scale In할때 EC2 종료보다 선행되야 하는 작업이기에 작성하게 되었습니다.<br>다음 Step으로는 <a href="/2019/04/20/dev/infra/aws/scalability/scale_in/ec2/">Scale In - EC2 Instance</a>입니다.</p>
<hr>
<h1 id="Scale-In-ELB"><a href="#Scale-In-ELB" class="headerlink" title="Scale In - ELB"></a>Scale In - ELB</h1><h2 id="설정하려는-ELB의-대상을-찾아-이동"><a href="#설정하려는-ELB의-대상을-찾아-이동" class="headerlink" title="설정하려는 ELB의 대상을 찾아 이동."></a>설정하려는 ELB의 대상을 찾아 이동.</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/1.jpg" alt="1"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/2.jpg" alt="2"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/3.jpg" alt="3"></p>
<hr>
<h2 id="수정하려는-ELB-대상-그룹-조회-하여-선택-및-하단의-대상-Tab으로-이동"><a href="#수정하려는-ELB-대상-그룹-조회-하여-선택-및-하단의-대상-Tab으로-이동" class="headerlink" title="수정하려는 ELB 대상 그룹 조회 하여 선택 및 하단의 대상 Tab으로 이동"></a>수정하려는 ELB 대상 그룹 조회 하여 선택 및 하단의 대상 Tab으로 이동</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/4.jpg" alt="4"></p>
<hr>
<h2 id="편집-선택"><a href="#편집-선택" class="headerlink" title="편집 선택"></a>편집 선택</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/5.jpg" alt="5"></p>
<hr>
<h2 id="대상-등록을-취소할-인스턴스-선택-후-제거"><a href="#대상-등록을-취소할-인스턴스-선택-후-제거" class="headerlink" title="대상 등록을 취소할 인스턴스 선택 후 제거"></a>대상 등록을 취소할 인스턴스 선택 후 제거</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/6.jpg" alt="6"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/7.jpg" alt="7"></p>
<ul>
<li>예제로는 1 ~ 5의 인스턴스 중 4, 5의 인스턴스를 ELB에서 제외.</li>
</ul>
<hr>
<h2 id="가용될-인스턴스-재확인-후-저장"><a href="#가용될-인스턴스-재확인-후-저장" class="headerlink" title="가용될 인스턴스 재확인 후 저장"></a>가용될 인스턴스 재확인 후 저장</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/8.jpg" alt="8"></p>
<ul>
<li>가용될 인스턴스가 정상적으로 남아있는지 확인 후 저장.</li>
</ul>
<hr>
<h2 id="정상적인-대상-제거-확인"><a href="#정상적인-대상-제거-확인" class="headerlink" title="정상적인 대상 제거 확인."></a>정상적인 대상 제거 확인.</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/9.jpg" alt="9"><br><img data-src="/image/dev/devops/aws/scalability/scale_in/elb_scale_in/10.jpg" alt="10"></p>
<ul>
<li>실제로는 바로 사라지지 않으며 삭제한 인스턴스는 draining 상태로 제거될 준비가 진행됩니다.</li>
<li>모든 연결이 해당 인스턴스와 해제되면 화면과 같이 제거 됩니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Scalability</category>
        <category>ScaleIn</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>ScaleIn</tag>
        <tag>ELB</tag>
      </tags>
  </entry>
  <entry>
    <title>EBS - Scale Up</title>
    <url>/2019/04/20/dev/devops/aws/scalability/scale_up/ebs_scale_up/</url>
    <content><![CDATA[<p>본문은 AWS EBS (Elastic Block Storage) Scale Up에 관한 내용이며<br>Storage 공간이 부족해지는 경우 진행하도록 합니다.<br>(내용은 Usage 가 Peak 라는 전제하에 진행)<br>사내 컨플 작성용 내용을 블로그에 올리기위해 blur 처러 된 이미지가 존재합니다. </p>
<hr>
<h1 id="Volume-Resize"><a href="#Volume-Resize" class="headerlink" title="Volume Resize"></a>Volume Resize</h1><h2 id="기존-용량-확인"><a href="#기존-용량-확인" class="headerlink" title="기존 용량 확인"></a>기존 용량 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> df -m</span></span><br><span class="line">Filesystem   1M-blocks   Used   Available   Use%   Mounted on       </span><br><span class="line">/dev/xvda1        7838   5800        2038    74%   /</span><br><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> lsblk</span></span><br><span class="line">NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">xvda    202:0   0    8G  0 disk</span><br><span class="line">└─xvda1 202:1   0    8G  0 part /</span><br></pre></td></tr></table></figure>
<ul>
<li><code>df -m</code> 으로 Filesystem 및 Mount 확인.</li>
<li><code>lsblk</code> 으로 volume 확</li>
</ul>
<hr>
<h2 id="Volume-Resize-1"><a href="#Volume-Resize-1" class="headerlink" title="Volume Resize"></a>Volume Resize</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_up/ebs_scale_up/1.jpg" alt="1"><br><img data-src="/image/dev/devops/aws/scalability/scale_up/ebs_scale_up/2.jpg" alt="2"></p>
<ul>
<li>Resize 하고자하는 볼륨 선택</li>
<li>우클릭하여 볼륨 수정</li>
<li>크기 지정 및 수정 (일정 시간 소요)</li>
</ul>
<hr>
<h2 id="Linux-Filesystem-확장"><a href="#Linux-Filesystem-확장" class="headerlink" title="Linux Filesystem 확장"></a>Linux Filesystem 확장</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> lsblk</span></span><br><span class="line">NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">xvda    202:0   0   14G  0 disk</span><br><span class="line">└─xvda1 202:1   0    8G  0 part /</span><br><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> mount | grep ^/dev</span></span><br><span class="line">/dev/xvda1 on / type ext4 (rw.noatime, data=ordered)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>lsblk</code> Volume 확인</li>
<li><code>mount | grep ^/dev</code> Filesystem 확인</li>
</ul>
<hr>
<h2 id="할당되지-않은-용량을-해당-filesystem-에-확장"><a href="#할당되지-않은-용량을-해당-filesystem-에-확장" class="headerlink" title="할당되지 않은 용량을 해당 filesystem 에 확장"></a>할당되지 않은 용량을 해당 filesystem 에 확장</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo growpart /dev/xvda 1</span></span><br><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> sudo resize2fs /dev/xvda1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Storage 가 가득찬 상태에서는 filesystem 확장이 불가능 하므로 최소 10%정도의 용량을 확보해야합니다.</li>
<li><code>sudo growpart /dev/xvda 1</code> 해당 파티션 볼륨 확장.</li>
<li><code>sudo resize2fs /dev/xvda1</code> 는 filesystem 이 ex2, ex3, ex4일때 진행합니다.</li>
</ul>
<hr>
<h2 id="할당된-Volume-확인"><a href="#할당된-Volume-확인" class="headerlink" title="할당된 Volume 확인"></a>할당된 Volume 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> lsblk</span></span><br><span class="line">NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">xvda    202:0   0   14G  0 disk</span><br><span class="line">└─xvda1 202:1   0   14G  0 part /</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html">AWS 볼륨 크기 조정 후 Linux 파일 시스템 확장</a></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Scalability</category>
        <category>ScaleUp</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EBS</tag>
        <tag>ScaleUp</tag>
        <tag>Volume</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 - Scale Up</title>
    <url>/2019/04/20/dev/devops/aws/scalability/scale_up/ec2_scale_up/</url>
    <content><![CDATA[<p>본문은 EC2 instance 의 Scale Up에 관한 내용이며<br>주로 CPU, RAM overflow 되어 안정적인 Service 를 제공 할 수 없을때 진행하도록 합니다.<br>예제는 small -&gt; xlarge로 scale up입니다.</p>
<hr>
<h1 id="Scale-Up-EC2-Instance"><a href="#Scale-Up-EC2-Instance" class="headerlink" title="Scale Up - EC2 Instance"></a>Scale Up - EC2 Instance</h1><h2 id="이미지-생성"><a href="#이미지-생성" class="headerlink" title="이미지 생성"></a>이미지 생성</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/1.jpg" alt="1"><br><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/2.jpg" alt="2"></p>
<ul>
<li>해당 이미지 우클릭</li>
<li>이미지 -&gt; 이미지 생성</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/3.jpg" alt="3"></p>
<ul>
<li>이미지 이름 및 이미지 설명 입력 후 생성</li>
</ul>
<hr>
<h2 id="이미지-기반-인스턴스-시작"><a href="#이미지-기반-인스턴스-시작" class="headerlink" title="이미지 기반 인스턴스 시작"></a>이미지 기반 인스턴스 시작</h2><p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/4.jpg" alt="4"></p>
<ul>
<li>AMI 메뉴 이동</li>
<li>생성중인 이미지 확인</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/5.jpg" alt="5"></p>
<ul>
<li>생성된 이미지 선택하여 시작</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/7.jpg" alt="6"></p>
<ul>
<li>인스턴스 유형 선택 : 변경하고자 하는 인스턴스 유형 선택</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/8.jpg" alt="7"></p>
<ul>
<li>인스턴스 세부 정보 구성 : 기존 인스턴스와 동일한 네트워크, 서브넷 등 옵션 선택</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/9.jpg" alt="8"></p>
<ul>
<li>스토리지 추가 : 기존 인스턴스와 동일하거나 볼륨 증가.</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/10.jpg" alt="9"></p>
<ul>
<li>태그 추가 : 기존 인스턴스와 동일한 태그 설정</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/12.jpg" alt="10"></p>
<ul>
<li>보안 그룹 구성 : 기존 인스턴스와 동일한 보안 그룹 할당 및 인바운드 확인.</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/13.jpg" alt="11"></p>
<ul>
<li>인스턴스 시작 검토 : 기존 인스턴스와 동일한 설정인지 확인.</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/14.jpg" alt="12"></p>
<ul>
<li>키페어 : 기존 인스턴스에서 사용하는 동일 키페어 구성.</li>
</ul>
<p><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/15.jpg" alt="14"><br><img data-src="/image/dev/devops/aws/scalability/scale_up/ec2_scale_up/16.jpg" alt="15"></p>
<ul>
<li>생성된 인스턴스 확인</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Scalability</category>
        <category>ScaleUp</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>ScaleUp</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS - Create</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/create/rds-create/</url>
    <content><![CDATA[<p>Amazon Relational Database Service(RDS)를 사용하면 클라우드에서 관계형 데이터베이스를 간편하게 설정, 운영 및 확장할 수 있습니다.<br>하드웨어 프로비저닝, 데이터베이스 설정, 패치 및 백업과 같은 시간 소모적인 관리 작업을 자동화하면서 비용 효율적이고 크기 조정 가능한 용량을 제공합니다.<br>사용자가 애플리케이션에 집중하여 애플리케이션에 필요한 빠른 성능, 고가용성, 보안 및 호환성을 제공할 수 있도록 지원합니다.</p>
<hr>
<h1 id="RDS-Create"><a href="#RDS-Create" class="headerlink" title="RDS - Create"></a>RDS - Create</h1><p><img data-src="/image/dev/devops/aws/database/rds/create/1.png" alt="1"></p>
<ul>
<li>데이터베이스 생성 버튼을 클릭합니다</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/2.png" alt="2"></p>
<ul>
<li>사용하고자 하는 RDS 엔진을 선택 합니다</li>
<li>가이드는 MariaDB로 진행 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/3.png" alt="3"></p>
<ul>
<li>사용 사례를 선택 합니다</li>
<li>사용 목적과 비용을 고려하여 선택하는 것이 좋습니다</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/4.png" alt="4"></p>
<ul>
<li>DB 엔진 버전은 사용하고자 하는 버전으로 선택합니다.</li>
<li>DB 인스턴스 클래스는 EC2에서 인스턴스를 만드는 것과 동일하다고 볼 수 있습니다.</li>
<li>다중 AZ 배포는 다른 가용 영역에 복제됩니다, 이중화 방식은 아니며 인프라 장애 발생시 사용되는 “예비” 복제본 입니다</li>
<li>스토리지 유형은 EC2 에서 EBS를 선택하는 것과 동일하며 Database인 만큼 성능 차이가 클 수 있습니다.</li>
<li><code>DB 인스턴스 클래스</code>, <code>다중 AZ 배포</code>, <code>스토리지 유형</code> 은 어떻게 설정하느냐에 따라 비용에 영향이 큽니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/5.png" alt="5"></p>
<ul>
<li>DB 인스턴스 식별자는 aws rds 에서 확인할 수 있는 <code>DB 인스턴스</code> 이름 입니다.</li>
<li>마스터 사용자 이름은 RDS의 admin 계정입니다.</li>
<li>마스터 암호, 암호 확인은 admin 계정의 비밀번호 입니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/6.png" alt="6"></p>
<ul>
<li>Virtual Private Cloud(VPC)는 어떤 VPC 기반인지 설정합니다</li>
<li>VPC의 해당하는 서브넷과 IP 범위를 정의할 수 있습니다.</li>
<li>퍼블릭 액세스 가능성은 외부 접근을 제한하기 위해 <code>아니요</code>를 선택할 수 있습니다.</li>
<li>가용 영역은 해당 리전의 가용할 영역을 선택 할 수 있습니다.</li>
<li>VPC 보안그룹은 접근 IN/OUT 바운드 그룹을 생성하거나 기존의 그룹을 사용합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/7.png" alt="7"></p>
<ul>
<li>데이터베이스 옵션은 이름, 포트, 그리고 세세하게 설정가능한 <code>파리미터 그룹</code>, <code>옵션 그룹</code> 선택이 가능합니다<br>특히 이름은 필수값이 아니며 기본적으로 생성되는 데이터베이스 스키마 입니다.</li>
<li>암호화 사용시 <code>AES-256</code> 암호화 알고리즘을 사용하여 데이터가 암호화 됩니다</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/8.png" alt="8"></p>
<ul>
<li>백업은 상시 자동 백업에 대한 설정을 할 수 있습니다.</li>
<li>모니터링은 <code>확장 모니터링</code>을 사용할 수 있으며 <code>CloudWatch</code>에서 확인할 수 있습니다<br>그리고 프리티어를 초과하는 경우에만 비용이 발생하게 됩니다.</li>
<li>로그 내보내기는 필요한 로그를 <code>CloudWatch</code>로 볼 수 있게 설정하면 됩니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/9.png" alt="9"></p>
<ul>
<li>유지 관리는 엔진에 관련된 마이너 버전 자동 업데이트와 AWS RDS 이슈 패치의 유지 관리 기간을 설정 할 수 있습니다.<br>보통은 대체로 운영 중 트래픽이 적을때 되도록 설정하는 하는것이 좋습니다.</li>
<li><code>삭제 방지</code>는 데이터베이스 생성 체크 시 실수로 삭제되는 것을 방지 할 수 있으며<br>RDS 수정 화면에서 <code>삭제 방지 활성화</code>를 체크 해제 후 삭제 할 수 있게 됩니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/create/10.png" alt="10"><br><img data-src="/image/dev/devops/aws/database/rds/create/11.png" alt="11"></p>
<ul>
<li>생성 요청한 RDS가 <code>생성 중</code> 상태인 것을 확인할 수 있습니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS - Snapshot Create</title>
    <url>/2019/09/06/dev/devops/aws/database/rds/snapshot/create/</url>
    <content><![CDATA[<p>RDS를 Snapshot을 생성하는 방법에 대해 알아봅니다.</p>
<h1 id="Snapshot-Create"><a href="#Snapshot-Create" class="headerlink" title="Snapshot Create"></a>Snapshot Create</h1><p><img data-src="/image/dev/devops/aws/rds/snapshot/create/1.png" alt="1"></p>
<ul>
<li><code>RDS</code> 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/rds/snapshot/create/2.png" alt="2"></p>
<ul>
<li><code>스냅샷</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/rds/snapshot/create/3.png" alt="3"></p>
<ul>
<li><code>스냅샷 만들기</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/rds/snapshot/create/4.png" alt="4"></p>
<ul>
<li>DB인스턴스 : 스냅샷을 생성할 DB 인스턴스 선택.</li>
<li>스냅샷 이름 : 이름</li>
<li><code>스냅샷 만들기</code></li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Snapshot</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Snapshot</tag>
      </tags>
  </entry>
  <entry>
    <title>CloudFront - Configuration Domain</title>
    <url>/2019/08/18/dev/devops/aws/network-contents/cloud-front/config/cloud-front-domain/</url>
    <content><![CDATA[<p>기본적으로 설정되는 CloudFront Domain이 아닌 특정서비스의 sub domain으로 사용하기 위해서 이며,<br>추가적인 설정에 따라서 CORS 등등 을 하기 위해서도 필요합니다.<br>예를들어 <code>example.com</code>을 domain을 사용하는 서비스가 있을때 <code>cdn.example.com</code>으로 사용하는 것처럼 말이죠.</p>
<hr>
<h1 id="Route53-Record-Set"><a href="#Route53-Record-Set" class="headerlink" title="Route53 - Record Set"></a>Route53 - Record Set</h1><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/1.png" alt="1"></p>
<ul>
<li>생성하려는 Domain 연결을 위해 Route53에서 Record Set을 추가합니다<br>자세한 내용은 <a href="/2019/08/02/dev/infra/aws/network-contents/route53/record-set/route53-record-set/">Route53 - Record Set</a> 를 참조 하세요.</li>
</ul>
<hr>
<h1 id="ACM-for-Lambda-Edge"><a href="#ACM-for-Lambda-Edge" class="headerlink" title="ACM for Lambda@Edge"></a>ACM for Lambda@Edge</h1><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/2.png" alt="2"></p>
<ul>
<li><code>Lambda@Edge</code>를 사용할 예정이 없다면 건너뛰어도 됩니다.</li>
<li><code>CloudFront</code>에 domain 설정시 특정 domain의 sub domain으로 사용하기 위해 해당 domain의 ACM이 필요합니다.</li>
<li><code>ACM</code>은 추후 <code>Lambda@Edge</code>를 사용하기 위해 <code>us-east-1</code>에 인증서를 생성하여 사용.<br>자세한 내용은 <a href="/2019/08/02/dev/infra/aws/security-credentials/acm/create/acm-create/">ACM - Create</a></li>
</ul>
<hr>
<h1 id="CloudFront-Configuration-Domain"><a href="#CloudFront-Configuration-Domain" class="headerlink" title="CloudFront - Configuration Domain"></a>CloudFront - Configuration Domain</h1><h2 id="메뉴-이동"><a href="#메뉴-이동" class="headerlink" title="메뉴 이동"></a>메뉴 이동</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/3.png" alt="3"></p>
<ul>
<li>AWS 메인에서 <code>CloudFront</code>메뉴 이동.</li>
</ul>
<hr>
<h2 id="CloundFront-Distribution"><a href="#CloundFront-Distribution" class="headerlink" title="CloundFront Distribution"></a>CloundFront Distribution</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/4.png" alt="4"></p>
<ul>
<li>Domain을 할당하려는 Distribution 상세로 이동.</li>
</ul>
<hr>
<h2 id="General-Edit"><a href="#General-Edit" class="headerlink" title="General Edit"></a>General Edit</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/5.png" alt="5"></p>
<ul>
<li><code>General</code> Tab 클릭.</li>
<li><code>Edit</code> 클릭.</li>
</ul>
<hr>
<h2 id="Edit-Distribution"><a href="#Edit-Distribution" class="headerlink" title="Edit Distribution"></a>Edit Distribution</h2><h3 id="Distribution-Setting"><a href="#Distribution-Setting" class="headerlink" title="Distribution Setting"></a>Distribution Setting</h3><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/6.png" alt="6"></p>
<ul>
<li><code>Alternate Domain Names</code>에 사용하려는 Domain을 입력합니다.</li>
<li><code>Custom SSL Certificate</code> 서비스하는 Domain의 sub domain으로 사용하려면 Custom SSL Certificate를 선택하세요.</li>
<li>사용하려는 Domain의 SSL Certificate를 선택합니다.<br>주의할 점은 CloudFront는 region이 필요한 곳의 SSL Certificate를 사용하세요.<br>만약 <code>Lambda@Edge</code> 사용을 고려 중 이라면 반드시 상단의 <code>ACM for Lambda@Edge</code> 항목을 확인 후 적용 해야합니다. </li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/7.png" alt="7"></p>
<ul>
<li><code>Yes, Edit</code> 버튼을 클릭하여 저장합니다.</li>
</ul>
<hr>
<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/config/domain/8.png" alt="8"></p>
<ul>
<li>정상적으로 <code>Alternate Domain Names</code>, <code>SSL Certificate</code> 적용되었는지 확인합니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>CloudFront</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>CloudFront</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - Create</title>
    <url>/2019/08/01/dev/devops/aws/computing/ecr/create/ecr-create/</url>
    <content><![CDATA[<p>Amazon Elastic Container Registry(ECR)는 개발자가 Docker 컨테이너 이미지를 손쉽게 저장, 관리 및 배포할 수 있게 해주는 완전관리형 Docker 컨테이너 레지스트리입니다.<br>Amazon ECR은 Amazon Elastic Container Service(ECS)와 통합되므로 개발에서 프로덕션까지의 워크플로를 간소화할 수 있습니다.<br>Amazon ECR을 사용하면 자체 컨테이너 리포지토리를 운영하거나 기본 인프라 확장에 대해 걱정할 필요가 없습니다.<br>Amazon ECR은 이미지를 가용성과 확장성이 뛰어난 아키텍처에 호스팅하여 애플리케이션을 위해 컨테이너를 안정적으로 배포할 수 있습니다.<br>또한, AWS Identity and Access Management(IAM)와 통합되어 각 리포지토리에 대한 리소스 수준의 제어를 제공합니다.<br>Amazon ECR에는 선수금이나 약정이 없습니다. 리포지토리에 저장한 데이터와 인터넷으로 전송한 데이터 양에 대한 요금만 지불합니다.<br>Reference : <a href="https://aws.amazon.com/ko/ecr/">AWS ECR</a></p>
<p><font color="red"><em>Docker Hub의 Private Registry를 사용하지 않고 ECR을 사용한다고 생각하면 이해가 쉽습니다.</em></font></p>
<hr>
<h1 id="Create-Role-ECR"><a href="#Create-Role-ECR" class="headerlink" title="Create Role - ECR"></a>Create Role - ECR</h1><h2 id="AWS-메인에서-ECR-이동"><a href="#AWS-메인에서-ECR-이동" class="headerlink" title="AWS 메인에서 ECR 이동"></a>AWS 메인에서 ECR 이동</h2><p><img data-src="/image/dev/devops/aws/computing/ecr/create/1.png" alt="1"></p>
<hr>
<h2 id="Repository-생성"><a href="#Repository-생성" class="headerlink" title="Repository 생성"></a>Repository 생성</h2><p><img data-src="/image/dev/devops/aws/computing/ecr/create/2.png" alt="2"></p>
<ul>
<li>Repository 생성 클릭</li>
</ul>
<hr>
<h2 id="Repository-생성-정보-입력"><a href="#Repository-생성-정보-입력" class="headerlink" title="Repository 생성 정보 입력."></a>Repository 생성 정보 입력.</h2><p><img data-src="/image/dev/devops/aws/computing/ecr/create/3.png" alt="3"></p>
<ul>
<li>Repository 입력.</li>
<li>Repository 생성</li>
<li><del>Safari에서 생성 클릭시 진행이 되지 않는 경우 Chrome에서 수행</del> 현재는 Safari에서도 잘 됩니다.</li>
<li>namespace를 꼭 사용하지 않아도 상관없습니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Computing</tag>
        <tag>ECR</tag>
      </tags>
  </entry>
  <entry>
    <title>CloudFront - Create</title>
    <url>/2019/08/18/dev/devops/aws/network-contents/cloud-front/create/cloud-front-create/</url>
    <content><![CDATA[<p><code>CloudFront</code>는 .html, .css, .js 및 이미지 파일과 같은 정적 및 동적 웹 콘텐츠를 사용자에게 더 빨리 배포하도록 지원하는 웹 서비스입니다.<br><code>CloudFront</code>는 엣지 로케이션이라고 하는 데이터 센터의 전 세계 네트워크를 통해 콘텐츠를 제공하며,<br>서비스하는 콘텐츠를 사용자가 요청하면 지연 시간이 가장 낮은 엣지 로케이션으로 라우팅되므로 콘텐츠 전송 성능이 뛰어납니다.<br>예를들어 특정 이미지가 캐싱되기전에 100ms가 소요되었다면 <code>CloudFront</code>에 캐싱된 경우 1x ms가 소요될 정도로 성능 개선이 되기 때문에<br>Global Service뿐만 아니라 다양하게 사용하게됩니다.</p>
<hr>
<h1 id="CloudFront-Create"><a href="#CloudFront-Create" class="headerlink" title="CloudFront - Create"></a>CloudFront - Create</h1><h2 id="메뉴-이동"><a href="#메뉴-이동" class="headerlink" title="메뉴 이동"></a>메뉴 이동</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/1.png" alt="1"></p>
<ul>
<li>AWS 메인에서 <code>CloudFront</code>메뉴 이동.</li>
</ul>
<hr>
<h2 id="CloundFront-Distribution"><a href="#CloundFront-Distribution" class="headerlink" title="CloundFront Distribution"></a>CloundFront Distribution</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/2.png" alt="2"></p>
<ul>
<li><code>Create Distribution</code>버튼 클릭.</li>
<li>Create CloudFront라고 생각해도 무방.</li>
</ul>
<hr>
<h2 id="Select-a-delivery-method-for-your-content"><a href="#Select-a-delivery-method-for-your-content" class="headerlink" title="Select a delivery method for your content."></a>Select a delivery method for your content.</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/3.png" alt="3"></p>
<ul>
<li>WEB 카테고리의 <code>Get Started</code>버튼을 클릭.</li>
<li>WEB은 주로 Static, 즉 정적인 파일들을 서비스 할때 좋습니다.</li>
<li>RTMP는 주로 Media 파일들, 스트리밍을 하려고 할 때 사용하는게 좋습니다.</li>
</ul>
<hr>
<h2 id="Create-Distribution"><a href="#Create-Distribution" class="headerlink" title="Create Distribution"></a>Create Distribution</h2><h3 id="Origin-Setting"><a href="#Origin-Setting" class="headerlink" title="Origin Setting"></a>Origin Setting</h3><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/4.png" alt="4"></p>
<ul>
<li><code>Origin Domain Name</code>은 해당 항목을 클릭하거나 입력하려 하면 기존에 생성되어있는 S3 Bucket을 선택 할 수 있습니다.</li>
<li><code>Origin ID</code>는 위의 <code>Origin Domain Name</code>에서 S3를 선택하면 자동 입력됩니다.</li>
<li><code>Restrict Bucket Access</code>는 <code>Yes</code> 선택하여 bucket access를 제한합니다.</li>
<li><code>Origin Access Identity</code>는 <code>Create a New Identity</code>를 선택하여 접근 하기 위한 identity를 생성 합니다. (무조건 적인 옵션은 아닙니다)</li>
<li><code>Comment</code>는 Default prefix <code>access-identity</code> 에 해당 bucket 이름을 붙입니다.</li>
<li><code>Grant Read Permissions on Bucket</code>는 <code>Yes, Update Bucket Policy</code>를 선택합니다.<br>S3 Bucket Policy에 CloudFront 에서 필요한 정책을 추가 합니다<br><code>No, I Will Update Permissions</code> 선택시 custom manual 입니다.</li>
</ul>
<hr>
<h3 id="Default-Cache-Behavior-Settings"><a href="#Default-Cache-Behavior-Settings" class="headerlink" title="Default Cache Behavior Settings"></a>Default Cache Behavior Settings</h3><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/5.png" alt="5"></p>
<ul>
<li><code>Compress Object Automatically</code>는 <code>Yes</code>를 선택합니다.<br>해당 옵션 선택시 파일을 압축하여 제공하며 다운로드 성능을 더 개선 시킬 수 있습니다.<br>요청시 <code>Accept-Encoding: gzip</code> 이 포함되어 있어야 합니다<br>자세한 내용은 <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/ServingCompressedFiles.html">Serving Compressed Files</a> 참조 하세요.</li>
</ul>
<hr>
<h3 id="Distribution-Settings"><a href="#Distribution-Settings" class="headerlink" title="Distribution Settings"></a>Distribution Settings</h3><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/6.png" alt="6"></p>
<ul>
<li>Default 설정 그대로 두면 됩니다.</li>
<li><code>Create Distribution</code> 버튼을 클릭하여 생성합니다.</li>
</ul>
<hr>
<h2 id="Check-Created"><a href="#Check-Created" class="headerlink" title="Check Created"></a>Check Created</h2><p><img data-src="/image/dev/devops/aws/network-contents/cloud-front/create/7.png" alt="7"></p>
<ul>
<li>생성된 <code>Distribution</code>을 확인합니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>CloudFront</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>CloudFront</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - Tagged Image Life Cycle</title>
    <url>/2019/08/02/dev/devops/aws/computing/ecr/lifecycle/ecr-tagged-ifecycle/</url>
    <content><![CDATA[<p>AWS ECR Lifecycle Policy의 목적과 방법에 대해 알아보도록 합시다.</p>
<ul>
<li>ECR 버저닝시 오래된 과거 버전의 모든 이미지까지 ECR에 누적되기 때문에 너무 많은 이미지가 쌓이지 않게 하기 위해<br>Lifecycle Policy를 사용하여 자동으로 삭제 하게 끔 할 수 있습니다.</li>
<li>ECR은 월 1GB 당 $0.10 요금(VAT 미포함)이 발생합니다.<br>여러개의 서비스 그리고 개발, 운영 까지 포함하게된다면 생각보다 매달 요금이 많이 발생 할 수도 있습니다.<br>정말 불필요한 요금이 발생하지 않도록 하기 위해서 Lifecycle Policy 꼭 사용하도록 합시다 </li>
</ul>
<hr>
<h1 id="Tagged-Lifecycle-Policy"><a href="#Tagged-Lifecycle-Policy" class="headerlink" title="Tagged Lifecycle Policy"></a>Tagged Lifecycle Policy</h1><p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/1.png" alt="1"></p>
<ul>
<li>괴물(질문) 같은 분위기를 내뿜는 Repository 를 하나 선택합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/2.png" alt="2"></p>
<ul>
<li>122 mb 의 이미지가 93 개나 있는 총 11GB 의 이미지가 있고 월 1.1$를 잡아먹는 괴물입니다…</li>
<li>Lifecycle Policy 메뉴로 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/3.png" alt="3"></p>
<ul>
<li>테스트 규칙 편집 으로 이동합니다</li>
<li>모든 Lifecycle Policy 은 Test 를 합니다 그리고 의도대로 수행하는지 확인 후 진행 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/4.png" alt="4"></p>
<ul>
<li>규칙 생성으로 이동합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/5.png" alt="5"></p>
<ul>
<li>테스트 수명 주기 규칙 구성<ul>
<li>규칙 우선 순위 : 여러개의 정책이 있을때 우선 순위를 위해 입력합니다.</li>
<li>규칙 설명 : 단순하게 해당 규칙의 설명을 적습니다</li>
<li>이미지 상태 : 이미지 상태 조건 입니다. <ul>
<li>태그가 지정됨 : tag 가 있고 prefix가 존재하는 경우 사용합니다</li>
<li>태그가 지정되지 않음 : Untagged 된 이미지가 대상이 됩니다.</li>
<li>모두 선택 : 모든 이미지가 대상이 됩니다. (tag가 있으나 prefix가 없는경우 포함)</li>
</ul>
</li>
<li>일치 기준 : 숫자만 입력가능 합니다.<ul>
<li>이미지가 푸시된 후 : 일 단위로 시간 제한 조건을 추가 합니다.</li>
<li>카운트 수가 다음을 초과 : 이미지 개수 단위로 제한되어<br>가장 오래된 이미지가 삭제 됩니다.</li>
</ul>
</li>
</ul>
</li>
<li>이번 정책은 총 이미지가 3개로 제한을 하는 경우 입니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/6.png" alt="6"></p>
<ul>
<li>생성한 정책을 테스트 실행 합니다</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/7.png" alt="7"></p>
<ul>
<li>해당 정책을 테스트하여 어떤 이미지들이 영향을 받는지<br>아래의 목록에서 확인 합니다</li>
<li>테스트 내용이 의도한 정책 내용에 맞게 되었다면<br>해당 테스트 정책을 수명 주기 정책으로 적용 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/8.png" alt="8"></p>
<ul>
<li>테스트 정책을, 수명 주기 정책으로 적용 하기 위해 적용을 선택 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/9.png" alt="9"></p>
<ul>
<li>수명 주기 정책 규칙에 테스트 하였던 정책이 추가된것을 확인합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/tagged/10.png" alt="10"></p>
<ul>
<li>총 이미지 3개로 제한 정책이 정상적으로 적용되어<br>3개 이외에 오래된 이미지들은 모두 자동 삭제 된것을 볼 수 있습니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Computing</tag>
        <tag>ECR</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - Untagged Image Life Cycle</title>
    <url>/2019/08/02/dev/devops/aws/computing/ecr/lifecycle/ecr-untagged-lifecycle/</url>
    <content><![CDATA[<p>AWS ECR Lifecycle Policy의 목적과 방법에 대해 알아보도록 합시다.</p>
<ul>
<li>ECR 버저닝시 오래된 과거 버전의 모든 이미지까지 ECR에 누적되기 때문에 너무 많은 이미지가 쌓이지 않게 하기 위해<br>Lifecycle Policy를 사용하여 자동으로 삭제 하게 끔 할 수 있습니다.</li>
<li>ECR은 월 1GB 당 $0.10 요금(VAT 미포함)이 발생합니다.<br>여러개의 서비스 그리고 개발, 운영 까지 포함하게된다면 생각보다 매달 요금이 많이 발생 할 수도 있습니다.<br>정말 불필요한 요금이 발생하지 않도록 하기 위해서 Lifecycle Policy 꼭 사용하도록 합시다 </li>
</ul>
<hr>
<h1 id="Untagged-Lifecycle-Policy"><a href="#Untagged-Lifecycle-Policy" class="headerlink" title="Untagged Lifecycle Policy"></a>Untagged Lifecycle Policy</h1><p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/1.png" alt="1"></p>
<ul>
<li>현재는 build를 위해 존재 하는 이미지들,<br>version이 고정되어야 하는 이미지가 있는 Repository,</li>
<li>ECR 초기 사용시 생성한 곳에 주로 Untagged 이미지가 존재 합니다.<br>왠지 Untagged 이미지가 있을것 같은 느낌적인 Repository 를 하나 선택합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/2.png" alt="2"></p>
<ul>
<li>촉이 좋습니다 Untagged 이미지들이 존재 하네요.</li>
<li>Lifecycle Policy 메뉴로 이동 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/3.png" alt="3"></p>
<ul>
<li>테스트 규칙 편집 으로 이동합니다</li>
<li>모든 Lifecycle Policy 은 Test 를 합니다<br>그리고 의도대로 수행하는지 확인 후 진행 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/4.png" alt="4"></p>
<ul>
<li>규칙 생성으로 이동합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/5.png" alt="5"></p>
<ul>
<li>테스트 수명 주기 규칙 구성<ul>
<li>규칙 우선 순위 : 여러개의 정책이 있을때 우선 순위를 위해 입력합니다.</li>
<li>규칙 설명 : 단순하게 해당 규칙의 설명을 적습니다</li>
<li>이미지 상태 : 이미지 상태 조건 입니다. <ul>
<li>태그가 지정됨 : tag 가 있고 prefix가 존재하는 경우 사용합니다</li>
<li>태그가 지정되지 않음 : Untagged 된 이미지가 대상이 됩니다.</li>
<li>모두 선택 : 모든 이미지가 대상이 됩니다. (tag가 있으나 prefix가 없는경우 포함)</li>
</ul>
</li>
<li>일치 기준 : 숫자만 입력가능 합니다.<ul>
<li>이미지가 푸시된 후 : 일 단위로 시간 제한 조건을 추가 합니다.</li>
<li>카운트 수가 다음을 초과 : 이미지 개수 단위로 제한되어<br>가장 오래된 이미지가 삭제 됩니다.</li>
</ul>
</li>
</ul>
</li>
<li>이번 정책은 총 이미지가 3개로 제한을 하는 경우 입니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/6.png" alt="6"></p>
<ul>
<li>생성한 정책을 테스트 실행 합니다</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/7.png" alt="7"></p>
<ul>
<li>해당 정책을 테스트하여 어떤 이미지들이 영향을 받는지<br>아래의 목록에서 확인 합니다</li>
<li>테스트 내용이 의도한 정책 내용에 맞게 되었다면<br>해당 테스트 정책을 수명 주기 정책으로 적용 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/8.png" alt="8"></p>
<ul>
<li>테스트 정책을, 수명 주기 정책으로 적용 하기 위해 적용을 선택 합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/9.png" alt="9"></p>
<ul>
<li>수명 주기 정책 규칙에 테스트 하였던 정책이 추가된것을 확인합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ecr/lifecycle/untagged/10.png" alt="10"></p>
<ul>
<li>이미지 푸시 1일이 경과된 Untagged 이미지를 삭제하는 정책이<br>정상적으로 적용되어 tag가 지정된 이미지만 남아 있는것을 확인 할 수 있습니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Computing</tag>
        <tag>ECR</tag>
      </tags>
  </entry>
  <entry>
    <title>VPC - Create</title>
    <url>/2019/08/06/dev/devops/aws/network-contents/vpc/create/vpc-create/</url>
    <content><![CDATA[<p>Amazon Virtual Private Cloud(Amazon VPC)에서는 사용자가 정의한 가상 네트워크로 AWS 리소스를 시작할 수 있습니다.<br>이 가상 네트워크는 AWS의 확장 가능한 인프라를 사용한다는 이점과 함께 데이터 센터에서 운영하는 기존 네트워크와 매우 유사합니다.</p>
<hr>
<h1 id="VPC-Create"><a href="#VPC-Create" class="headerlink" title="VPC - Create"></a>VPC - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/create/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/create/2.png" alt="2"></p>
<ul>
<li><code>VPC</code> 항목으로 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/create/3.png" alt="3"></p>
<ul>
<li><code>Create VPC</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/create/4.png" alt="4"></p>
<ul>
<li>Name Tag : <code>VPC</code> 이름.</li>
<li>IPv4 CIRD block : CIDR 블록 형식의 <code>VPC</code>에 대한 IPv4 주소 범위. (블록 크기는  /16 ~ /24 넷 마스크)</li>
<li>IPv6 CIRD block : IPv6 CIRD 블록 사용 여부</li>
<li>Tenancy : <code>VPC</code>에 생성된 인스턴스가 전용 하드웨어 사용 옵션이며 Default를 선택.</li>
<li><code>Create</code> 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/create/5.png" alt="5"></p>
<ul>
<li><code>VPC</code> 생성 요청 정상 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - How to use</title>
    <url>/2019/08/01/dev/devops/aws/computing/ecr/use/ecr-use/</url>
    <content><![CDATA[<p>생성된 Docker Image를 ECR에 login / push / pull 하는 방법에 대한 설명입니다.</p>
<hr>
<h1 id="Login"><a href="#Login" class="headerlink" title="Login"></a>Login</h1><p>ECR에 Push를 하기 위해서는 먼저 해당 EC2에서 ECR에 접근이 가능해야합니다.</p>
<ul>
<li><a href="/2019/08/01/dev/infra/aws/security-credentials/iam/role/ecr/create/ecr-role-create/">Create Role - ECR</a></li>
<li><a href="/2019/08/01/dev/infra/aws/security-credentials/iam/role/ecr/apply/ecr-role-apply/">Apply Role for ECR</a></li>
</ul>
<p>정상적으로 되지 않는 경우 위의 링크를 참조하여 먼저 진행이 필요합니다.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ec2-user ~]$ sudo $(aws ecr get-login --no-include-email --region ap-northeast-2)</span><br><span class="line">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span><br><span class="line">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"> </span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Push"><a href="#Push" class="headerlink" title="Push"></a>Push</h1><h2 id="Push-format"><a href="#Push-format" class="headerlink" title="Push format"></a>Push format</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Set image tag</span></span><br><span class="line">[ec2-user ~]$ sudo docker tag [namespace]/[repo-name]:[tag] [aws account].dkr.ecr.[region].amazonaws.com/[namespace]/[repo-name]:[tag]</span><br><span class="line"><span class="meta">#</span><span class="bash"> Push</span></span><br><span class="line">[ec2-user ~]$ sudo docker push [aws account].dkr.ecr.[region].amazonaws.com/[namespace]/[repo-name]:[tag]</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Namespace : project</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Repo-Name : client</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Tag : latest</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Region : ap-northeast-2 (서울)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> AWS Account : 123456789012</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> Set image tag</span></span><br><span class="line">[ec2-user ~]$ sudo docker tag project/client:latest 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/project/client:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> 이미지 태그 지정</span></span><br><span class="line">[ec2-user ~]$ sudo docker push 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/project/client:latest</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Pull"><a href="#Pull" class="headerlink" title="Pull"></a>Pull</h1><h2 id="Pull-format"><a href="#Pull-format" class="headerlink" title="Pull format"></a>Pull format</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ec2-user ~]$ sudo docker pull [aws account].dkr.ecr.[region].amazonaws.com/[namespace]/[repo-name]:[tag]</span><br></pre></td></tr></table></figure>

<h2 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a>Example</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Namespace : project</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Repo-Name : client</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Tag : latest</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Region : ap-northeast-2 (서울)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> AWS Account : 123456789012</span></span><br><span class="line"> </span><br><span class="line">[ec2-user ~]$ sudo docker pull 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/project/client:latest</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Computing</tag>
        <tag>ECR</tag>
      </tags>
  </entry>
  <entry>
    <title>Route53 - Record Set</title>
    <url>/2019/08/02/dev/devops/aws/network-contents/route53/record-set/route53-record-set/</url>
    <content><![CDATA[<p>호스팅을 하기 위한 별칭(Root / Sub Domain 설정)을 생성 합니다.</p>
<hr>
<h1 id="Route53-Record-Set"><a href="#Route53-Record-Set" class="headerlink" title="Route53 - Record Set"></a>Route53 - Record Set</h1><p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/1.png" alt="1"></p>
<ul>
<li>record set을 추가하고 싶은 host를 선택하여 상세로 이동합니다.</li>
<li><code>Create Record Set</code> 를 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/2.png" alt="2"></p>
<ul>
<li>Root Domain을 추가하기 위해 Name에 아무것도 입력하지 않습니다,</li>
<li>Alias는 Yes를 선택</li>
<li>Alias Target는 연결하려는 로드밸런서를 선택</li>
<li><code>Create</code> 클릭 하여 생성</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/3.png" alt="3"></p>
<ul>
<li>Root Domain Alias 생성 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/4.png" alt="4"></p>
<ul>
<li><code>www</code> 를 입력하여 <code>www.example.com</code>이 가능하도록 합니다.</li>
<li>Alias는 Yes를 선택</li>
<li>Alias Target는 연결하려는 로드밸런서를 선택</li>
<li><code>Create</code> 클릭 하여 생성</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/5.png" alt="5"></p>
<ul>
<li><code>www.example.com</code> alias 생성 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/6.png" alt="6"></p>
<ul>
<li><code>api</code> 를 입력하여 <code>api.example.com</code>이 가능하도록 합니다.</li>
<li>Alias는 Yes를 선택</li>
<li>Alias Target는 연결하려는 로드밸런서를 선택</li>
<li><code>Create</code> 클릭 하여 생성</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/record-set/7.png" alt="7"></p>
<ul>
<li><code>api.example.com</code> alias 생성 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>Route53</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>Route53</tag>
      </tags>
  </entry>
  <entry>
    <title>Route53 - Create</title>
    <url>/2019/08/02/dev/devops/aws/network-contents/route53/create/route53-create/</url>
    <content><![CDATA[<p>가용성과 확장성이 우수한 DNS(도메인 이름 시스템) 웹 서비스입니다.<br>Route 53을 사용하여 세 가지 주요 기능, 즉 도메인 등록, DNS 라우팅, 상태 확인을 조합하여 실행할 수 있습니다</p>
<hr>
<h1 id="Route53-Create"><a href="#Route53-Create" class="headerlink" title="Route53 - Create"></a>Route53 - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/route53/create/1.png" alt="1"></p>
<ul>
<li>Route 53 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/create/2.png" alt="2"></p>
<ul>
<li>Hosted Zone으로 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/create/3.png" alt="3"></p>
<ul>
<li>Create Hosted Zone 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/create/4.png" alt="4"></p>
<ul>
<li>Domain Name 입력</li>
<li>Comment(Optional) 입력</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/route53/create/5.png" alt="5"></p>
<ul>
<li>생성 확인</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>Route53</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>Route53</tag>
      </tags>
  </entry>
  <entry>
    <title>Certificated Manager - Create</title>
    <url>/2019/08/02/dev/devops/aws/security-credentials/acm/create/acm-create/</url>
    <content><![CDATA[<p>AWS 에서는 https ssl 인증서를 무료로 제공합니다.<br>필요한 인증서를 생성 해봅시다!.</p>
<hr>
<h1 id="Certificated-Manager-Create"><a href="#Certificated-Manager-Create" class="headerlink" title="Certificated Manager - Create"></a>Certificated Manager - Create</h1><p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/1.png" alt="1"></p>
<ul>
<li>ACM 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/2.png" alt="2"></p>
<ul>
<li>인증서 요청</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/3.png" alt="3"></p>
<ul>
<li>공인 인증서를 선택</li>
<li>인증서 요청</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/4.png" alt="4"></p>
<ul>
<li>도메인 이름 추가 : Root, Sub domain 입력.</li>
<li>여기서 중요한 것은 꼭.꼭.꼭 Root 도메인과 Sub domain 둘 다 신청해야된다는 것이다.<br>Sub domain 만 할 경우 Root 도메인을 접속할시 인증서가 없다고 계속 브라우저 상단에 “안전하지 않음” 또는 “개인정보 오류”라고 브라우저가 막는다.<br>(feat. hyejin.ahn)</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/5.png" alt="5"></p>
<ul>
<li>검증 방법 선택</li>
<li>검토</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/6.png" alt="6"></p>
<ul>
<li>확인 및 요청</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/7.png" alt="7"></p>
<ul>
<li>최초 생성시 검증 보류 상태입니다.</li>
<li>화살표를 클릭하여 확장합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/8.png" alt="8"></p>
<ul>
<li>Route 53에서 레코드 생성 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/9.png" alt="9"></p>
<ul>
<li>Route 53에서 레코드 생성 (CNAME)</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/10.png" alt="10"></p>
<ul>
<li>성공 확인 (일정 시간 소요가 필요할 수 있습니다.)</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/11.png" alt="11"></p>
<ul>
<li>Route 53에서 확인</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/acm/create/12.png" alt="12"></p>
<ul>
<li>일정 시간 이후 ACM 발급완료 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>ACM</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Option Group - Apply</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/option-group/apply/rds-option-group-apply/</url>
    <content><![CDATA[<p>생성한 RDS Option Group을 적용하는 방법 입니다.</p>
<hr>
<h1 id="RDS-Option-Group-Apply"><a href="#RDS-Option-Group-Apply" class="headerlink" title="RDS Option Group - Apply"></a>RDS Option Group - Apply</h1><p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/1.png" alt="1"></p>
<ul>
<li>적용이 필요한 RDS 선택</li>
<li>수정 버튼 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/2.png" alt="2"></p>
<ul>
<li>데이터 베이스 옵션</li>
<li>생성한 옵션 그룹 선택.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/3.png" alt="3"></p>
<ul>
<li>계속 버튼 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/4.png" alt="4"></p>
<ul>
<li>적용 옵션 그룹 확인.</li>
<li>DB 인스턴스 수정</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/5.png" alt="5"></p>
<ul>
<li>RDS 수정 중 상태 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/6.png" alt="6"></p>
<ul>
<li>RDS 사용 가능 상태 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/apply/7.png" alt="7"></p>
<ul>
<li>적용된 옵션 그룹 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Option Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Option Group</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Option Group - Create</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/option-group/create/rds-option-group-create/</url>
    <content><![CDATA[<p>DB 엔진 중에는 데이터와 데이터베이스를 더욱 쉽게 관리할 뿐만 아니라 데이터베이스 보안을 더욱 강화한 추가 기능을 가진 엔진도 있습니다.<br>Amazon RDS는 옵션 그룹을 사용하여 이러한 기능을 활성화하고 구성합니다.<br>옵션 그룹은 Amazon RDS DB 인스턴스에서 사용 가능한 옵션이라는 기능을 지정할 수 있습니다. 옵션은 여러 설정을 통해 옵션의 활용 방식을 지정합니다.<br>이후 DB 인스턴스와 옵션 그룹을 연동시키면 지정한 옵션과 옵션 설정이 연동된 DB 인스턴스에서 활성화됩니다</p>
<hr>
<h1 id="RDS-Option-Group-Create"><a href="#RDS-Option-Group-Create" class="headerlink" title="RDS Option Group - Create"></a>RDS Option Group - Create</h1><p><img data-src="/image/dev/devops/aws/database/rds/option-group/create/1.png" alt="1"></p>
<ul>
<li>RDS 메누로 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/create/2.png" alt="2"></p>
<ul>
<li>옵션 그룹으로 이동</li>
<li>그룹 생성</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/option-group/create/3.png" alt="3"></p>
<ul>
<li>옵션 그룹 세부 정보<ul>
<li>이름 : 옵션 이름</li>
<li>설명 : 옵션 설명</li>
<li>엔진 : Database 엔진 선택</li>
<li>메이저 엔진 버전 : Database 엔진 버전 선택</li>
</ul>
</li>
<li>생성 클릭</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Option Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Option Group</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Parameter Group - Apply</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/parameter-group/apply/rds-parameter-group-apply/</url>
    <content><![CDATA[<p>생성한 RDS Parameter Group을 적용하는 방법 입니다.</p>
<hr>
<h1 id="RDS-Parameter-Group-Apply"><a href="#RDS-Parameter-Group-Apply" class="headerlink" title="RDS Parameter Group - Apply"></a>RDS Parameter Group - Apply</h1><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/1.png" alt="1"></p>
<ul>
<li>적용이 필요한 RDS 선택</li>
<li>수정 버튼 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/2.png" alt="2"></p>
<ul>
<li>데이터 베이스 옵션</li>
<li>생성한 파라미터 그룹 선택.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/3.png" alt="3"></p>
<ul>
<li>계속 버튼 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/4.png" alt="4"></p>
<ul>
<li>적용 파라미터 그룹 확인.</li>
<li>DB 인스턴스 수정</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/5.png" alt="5"></p>
<ul>
<li>RDS 수정 중 상태 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/6.png" alt="6"></p>
<ul>
<li>RDS 사용 가능 상태 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply/7.png" alt="7"></p>
<ul>
<li>적용된 파라미터 그룹 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Parameter Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Parameter Group</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Parameter Group - Create</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/parameter-group/create/rds-parameter-group-create/</url>
    <content><![CDATA[<p>DB 인스턴스 를 파라미터 그룹과 연결하여 DB 엔진 구성을 관리합니다.<br>Amazon RDS는 새로 생성된 DB 인스턴스 에 적용되는 기본 설정으로 파라미터 그룹을 정의합니다.<br>맞춤형 설정으로 자신만의 파라미터 그룹을 정의할 수 있습니다.<br>그런 다음 DB 인스턴스를 수정해 이 파라미터 그룹을 사용하게 할 수 있습니다.</p>
<hr>
<h1 id="RDS-Parameter-Group-Create"><a href="#RDS-Parameter-Group-Create" class="headerlink" title="RDS Parameter Group - Create"></a>RDS Parameter Group - Create</h1><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/create/1.png" alt="1"></p>
<ul>
<li>RDS 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/create/2.png" alt="2"></p>
<ul>
<li>파라미터 그룹 메뉴 이동</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/create/3.png" alt="3"></p>
<ul>
<li>파리미터 그룹 생성 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/create/4.png" alt="4"></p>
<ul>
<li>파라미터 그룹 세부 정보<ul>
<li>파라미터 그룹 패밀리 : DB 패밀리 선택</li>
<li>그룹 이름 : 이름 입력</li>
<li>설명 : 설명 입력</li>
</ul>
</li>
<li>생성 클릭</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Parameter Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Parameter Group</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Parameter Group - Apply Fix</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/parameter-group/apply-fix/rds-parameter-group-apply-fix/</url>
    <content><![CDATA[<p>RDS Parameter Group을 적용하면 비정상적으로 보류 상태가 발견될때가 있습니다.<br>이런 경우를 해결하는 방법은… 단순한 재부팅 이며 다음과 같습니다.</p>
<hr>
<h1 id="RDS-Parameter-Group-Apply-Fix"><a href="#RDS-Parameter-Group-Apply-Fix" class="headerlink" title="RDS Parameter Group - Apply Fix"></a>RDS Parameter Group - Apply Fix</h1><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply-fix/1.png" alt="1"></p>
<ul>
<li>RDS Parameter Group을 적용하였으나 비정상적으로 <code>재시작 보류</code> 상태가 발견.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply-fix/2.png" alt="2"></p>
<ul>
<li><code>재시작 보류</code> 상태인 RDS를 선택</li>
<li>인스턴스 작업의 재부팅 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply-fix/3.png" alt="3"></p>
<ul>
<li>재부팅 클</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply-fix/4.png" alt="4"></p>
<ul>
<li>재부팅 상태 확인.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/apply-fix/5.png" alt="5"></p>
<ul>
<li>재부팅 완료 후 정상적으로 동기화된 상태 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Parameter Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Parameter Group</tag>
      </tags>
  </entry>
  <entry>
    <title>Elastic IP - Assign</title>
    <url>/2019/08/03/dev/devops/aws/computing/ec2/elastic-ip/assign/elastic-ip-assign/</url>
    <content><![CDATA[<p>생성한 Elastic IP를 EC2 instance와 연동하는 방법에 대한 가이드 입니다.</p>
<hr>
<h1 id="Elastic-IP-Create"><a href="#Elastic-IP-Create" class="headerlink" title="Elastic IP - Create"></a>Elastic IP - Create</h1><p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/assign/1.jpg" alt="1"></p>
<ul>
<li>생성되어있는 Elastic IP를 선택 후 우클릭하여 주소연결을 클릭합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/assign/2.jpg" alt="2"></p>
<ul>
<li><code>Resource Type</code> 값을 인스턴스로 선택합니다.</li>
<li>Static IP를 할당할 <code>인스턴스를 선택합니다</code>.</li>
<li>인스턴스에 할당 할 <code>IP를 선택합니다</code>.</li>
<li><code>어소시에이드</code>를 클릭하여 할당합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/assign/3.jpg" alt="3"></p>
<ul>
<li>할당 연결 요청 상태 확인 후 <code>닫기</code>를 클릭합니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/assign/4.jpg" alt="4"></p>
<ul>
<li>Elastic IP, EC2 Instance 정상적으로 할당되었는지 확인합니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>EC2</category>
        <category>Elastic IP</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>Computing</tag>
        <tag>Elastic IP</tag>
      </tags>
  </entry>
  <entry>
    <title>RDS Parameter Group - MariaDB 10.3</title>
    <url>/2019/08/05/dev/devops/aws/database/rds/parameter-group/engine/rds-parameter-group-mariadb-10-3/</url>
    <content><![CDATA[<p>RDS MariaDB 10.3 사용시 설정한 Parameter Option 정보입니다.<br>그대로 보다는 필요한 옵션만 참고해서 사용 해주세요.</p>
<hr>
<h1 id="RDS-Parameter-Group-MariaDB-10-3"><a href="#RDS-Parameter-Group-MariaDB-10-3" class="headerlink" title="RDS Parameter Group - MariaDB 10.3"></a>RDS Parameter Group - MariaDB 10.3</h1><h2 id="편집"><a href="#편집" class="headerlink" title="편집"></a>편집</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/1.png" alt="1"></p>
<ul>
<li>MariaDB 10.3 Parameter Group 선택</li>
<li>편집</li>
</ul>
<hr>
<h2 id="상세"><a href="#상세" class="headerlink" title="상세"></a>상세</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/2.png" alt="2"></p>
<ul>
<li>파라미터 편집</li>
</ul>
<hr>
<h2 id="character-set-server-설정"><a href="#character-set-server-설정" class="headerlink" title="character_set_server 설정."></a>character_set_server 설정.</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/3.png" alt="3"></p>
<ul>
<li><code>character_set_server</code> 검색.</li>
<li><code>utf8mb4</code> 선택.</li>
<li>변경 사항 저장 클릭.</li>
</ul>
<hr>
<h2 id="character-set-client-설정"><a href="#character-set-client-설정" class="headerlink" title="character_set_client 설정"></a>character_set_client 설정</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/4.png" alt="4"></p>
<ul>
<li><code>character_set_client</code> 검색.</li>
<li><code>utf8mb4</code> 선택.</li>
<li>변경 사항 저장 클릭. </li>
</ul>
<hr>
<h2 id="collation-server-설정"><a href="#collation-server-설정" class="headerlink" title="collation_server 설정"></a>collation_server 설정</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/5.png" alt="5"></p>
<ul>
<li><code>collation_server</code> 검색.</li>
<li><code>utf8mb4_unicode_ci</code> 선택.</li>
<li>변경 사항 저장 클릭.</li>
</ul>
<hr>
<h2 id="lower-case-table-name-설정-Table-name-대소문자-구분-하지-않기-위해"><a href="#lower-case-table-name-설정-Table-name-대소문자-구분-하지-않기-위해" class="headerlink" title="lower_case_table_name 설정 (Table name 대소문자 구분 하지 않기 위해)"></a>lower_case_table_name 설정 (Table name 대소문자 구분 하지 않기 위해)</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/6.png" alt="6"></p>
<ul>
<li><code>lower_case_table_name</code> 검색.</li>
<li><code>1</code> 선택.</li>
<li>변경 사항 저장 클릭.</li>
</ul>
<hr>
<h2 id="skip-name-resolve-DNS-Lookup-과정-생략"><a href="#skip-name-resolve-DNS-Lookup-과정-생략" class="headerlink" title="skip_name_resolve (DNS Lookup 과정 생략)"></a>skip_name_resolve (DNS Lookup 과정 생략)</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/7.png" alt="7"></p>
<ul>
<li><code>skip_name_resolve</code> 검색.</li>
<li><code>1</code> 선택.</li>
<li>변경 사항 저장 클릭.</li>
</ul>
<hr>
<h2 id="log-bin-trust-function-creators-Trigger-생성시-might-error을-없애기-위한"><a href="#log-bin-trust-function-creators-Trigger-생성시-might-error을-없애기-위한" class="headerlink" title="log_bin_trust_function_creators (Trigger 생성시 might error을 없애기 위한)"></a>log_bin_trust_function_creators (Trigger 생성시 might error을 없애기 위한)</h2><p><img data-src="/image/dev/devops/aws/database/rds/parameter-group/engine/mariadb-10-3/8.png" alt="8"></p>
<ul>
<li><code>log_bin_trust_function_creators</code> 검색</li>
<li><code>1</code> 선택</li>
<li>변경 사항 저장 클릭.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Database</category>
        <category>RDS</category>
        <category>Parameter Group</category>
      </categories>
      <tags>
        <tag>Database</tag>
        <tag>AWS</tag>
        <tag>RDS</tag>
        <tag>Parameter Group</tag>
      </tags>
  </entry>
  <entry>
    <title>Elastic IP - Create</title>
    <url>/2019/08/03/dev/devops/aws/computing/ec2/elastic-ip/create/elastic-ip-create/</url>
    <content><![CDATA[<p>Elastic IP는 static ip를 제공합니다.<br>EC2는 restart 하거나 Scale Up을 하기 위해 AMI를 생성 후 instance 유형을 바꿔서 새로 생성하는 경우<br>결과적으로는 새로운 EC2 instance가 생성하는 것이기 때문에 IP가 변경됩니다.<br>이럴때 단순히 Scale Up이기 때문에 기존에 IP를 유지해야 하는 경우가 있다면<br>Elastic IP를 사용하면 도움이 됩니다.<br>그리고 network interface 연결도 가능합니다.</p>
<hr>
<h1 id="Elastic-IP-Create"><a href="#Elastic-IP-Create" class="headerlink" title="Elastic IP - Create"></a>Elastic IP - Create</h1><p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/create/1.jpg" alt="1"></p>
<ul>
<li>EC2의 탄력적 IP 메뉴로 이동.</li>
<li>새 주소 할당.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/create/2.jpg" alt="2"></p>
<ul>
<li>할당을 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/elastic-ip/create/3.jpg" alt="3"></p>
<ul>
<li>닫기를 클릭하여 생성을 완료합니다.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>EC2</category>
        <category>Elastic IP</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>Computing</tag>
        <tag>Elastic IP</tag>
      </tags>
  </entry>
  <entry>
    <title>ELB - Http redirect Https</title>
    <url>/2019/08/04/dev/devops/aws/computing/ec2/elb/http-redirect-https/elb-http-redirect-https/</url>
    <content><![CDATA[<p>ELB에 <code>http</code> 요청이 들어올때 <code>https</code>로 redirect하는 설정입니다.</p>
<hr>
<h1 id="ELB-Create"><a href="#ELB-Create" class="headerlink" title="ELB - Create"></a>ELB - Create</h1><h2 id="편집하기"><a href="#편집하기" class="headerlink" title="편집하기"></a>편집하기</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/http-redirect-https/1.png" alt="1"></p>
<ul>
<li>해당 설정을 하려는 ELB 선택</li>
<li><code>HTTP:80</code> 리스너 선택</li>
<li><code>편집</code>클릭</li>
</ul>
<hr>
<h2 id="기본-작업-제거"><a href="#기본-작업-제거" class="headerlink" title="기본 작업 제거"></a>기본 작업 제거</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/http-redirect-https/2.png" alt="2"></p>
<ul>
<li>기본으로 생성되어 있는 작업을 제거합니다.</li>
</ul>
<hr>
<h2 id="작업-추가"><a href="#작업-추가" class="headerlink" title="작업 추가"></a>작업 추가</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/http-redirect-https/3.png" alt="3"></p>
<ul>
<li><code>작업추가</code>를 클릭.</li>
<li><code>리디렉션 대상...</code> 선</li>
</ul>
<hr>
<h2 id="Redirect-target-설정"><a href="#Redirect-target-설정" class="headerlink" title="Redirect target 설정"></a>Redirect target 설정</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/http-redirect-https/4.png" alt="4"></p>
<ul>
<li>설정<ul>
<li>Protocol은 <code>HTTPS</code>, port는 <code>443</code></li>
<li>기본 호스트 쿼리 경로 사용.</li>
<li>301 - 영구 이동됨.</li>
</ul>
</li>
<li><code>업데이트</code></li>
</ul>
<hr>
<h2 id="수정-확인"><a href="#수정-확인" class="headerlink" title="수정 확인."></a>수정 확인.</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/http-redirect-https/5.png" alt="5"></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>EC2</category>
        <category>ELB</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>ELB</tag>
        <tag>Computing</tag>
      </tags>
  </entry>
  <entry>
    <title>ELB - Create</title>
    <url>/2019/08/04/dev/devops/aws/computing/ec2/elb/create/elb-create/</url>
    <content><![CDATA[<p>Elastic Load Balancing의 약자로 시스템에 가해지는 부하를 여러대의 시스템으로 분산해서<br>규모있는 시스템을 만들 수 있도록 해주는 단일 진입점 입니다.<br>ELB를 만들어 봅시다.</p>
<hr>
<h1 id="ELB-Create"><a href="#ELB-Create" class="headerlink" title="ELB - Create"></a>ELB - Create</h1><h2 id="EC2-메뉴로-이동"><a href="#EC2-메뉴로-이동" class="headerlink" title="EC2 메뉴로 이동."></a>EC2 메뉴로 이동.</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/1.png" alt="1"></p>
<hr>
<h2 id="로드밸런서-메뉴로-이동"><a href="#로드밸런서-메뉴로-이동" class="headerlink" title="로드밸런서 메뉴로 이동"></a>로드밸런서 메뉴로 이동</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/2.png" alt="2"></p>
<hr>
<h2 id="로드-밸런서-생성"><a href="#로드-밸런서-생성" class="headerlink" title="로드 밸런서 생성"></a>로드 밸런서 생성</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/3.png" alt="3"></p>
<hr>
<h2 id="로드-밸런서-유형-선택"><a href="#로드-밸런서-유형-선택" class="headerlink" title="로드 밸런서 유형 선택"></a>로드 밸런서 유형 선택</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/4.png" alt="4"></p>
<ul>
<li>Application Load Balancer 선택</li>
</ul>
<hr>
<h2 id="로드-밸런서-구성"><a href="#로드-밸런서-구성" class="headerlink" title="로드 밸런서 구성"></a>로드 밸런서 구성</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/5.png" alt="5"></p>
<ul>
<li>기본 구성 : 로드 밸런서 이름</li>
<li>리스너 : http, https 를 사용하기 위한 구성</li>
<li>가용영역</li>
<li>해당 VPC 선택</li>
<li>가용 영역 : 영역 및 public Subnet 선택</li>
</ul>
<hr>
<h2 id="보안-설정-구성"><a href="#보안-설정-구성" class="headerlink" title="보안 설정 구성"></a>보안 설정 구성</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/6.png" alt="6"></p>
<ul>
<li>인증서 유형 : <code>ACM</code>에서 인증서 선택</li>
<li>인증서 이름 : <code>Certificated Manager</code>에서 생성한 인증서 선택</li>
</ul>
<hr>
<h2 id="보안-그룹-구성"><a href="#보안-그룹-구성" class="headerlink" title="보안 그룹 구성"></a>보안 그룹 구성</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/7.png" alt="7"></p>
<ul>
<li>보안 그룹 할당 : <code>새 보안 그룹 생성</code></li>
<li>보안 그룹 이름 : 이름 할당</li>
<li>프로토콜<ul>
<li>HTTP 전용 80 추가</li>
<li>HTTPS 전용 443 추가</li>
</ul>
</li>
</ul>
<hr>
<h2 id="라우팅-구성"><a href="#라우팅-구성" class="headerlink" title="라우팅 구성"></a>라우팅 구성</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/8.png" alt="8"></p>
<ul>
<li>대상 그룹 : <code>새 대상 그룹</code> (미리 생성해둔 대상 그룹이 있는 경우 <code>기존 보안 그룹 선택</code>)</li>
<li>이름 : 이름 할당</li>
</ul>
<hr>
<h2 id="대상-등록"><a href="#대상-등록" class="headerlink" title="대상 등록"></a>대상 등록</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/9.png" alt="9"></p>
<ul>
<li>인스턴스 항목에서 <code>Instance</code>를 선택하여 등록된 항목에 추가</li>
</ul>
<hr>
<h2 id="검토"><a href="#검토" class="headerlink" title="검토"></a>검토</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/10.png" alt="10"></p>
<ul>
<li>생성한 값으로 되어있는지 확인.</li>
<li><code>생성</code> 클릭.</li>
</ul>
<hr>
<h2 id="로드-밸런서-생성-상태"><a href="#로드-밸런서-생성-상태" class="headerlink" title="로드 밸런서 생성 상태"></a>로드 밸런서 생성 상태</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/11.png" alt="11"></p>
<hr>
<h2 id="생성-결과-확인"><a href="#생성-결과-확인" class="headerlink" title="생성 결과 확인"></a>생성 결과 확인</h2><p><img data-src="/image/dev/devops/aws/computing/ec2/elb/create/12.png" alt="12"></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>EC2</category>
        <category>ELB</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>ELB</tag>
        <tag>Computing</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 Instance - Create</title>
    <url>/2019/08/05/dev/devops/aws/computing/ec2/instance/create/ec2-instance-create/</url>
    <content><![CDATA[<p>Amazon Elastic Compute Cloud(Amazon EC2)는 Amazon Web Services(AWS) 클라우드에서 확장식 컴퓨팅을 제공합니다.<br>Amazon EC2를 사용하면 하드웨어에 선투자할 필요가 없어 더 빠르게 애플리케이션을 개발하고 배포할 수 있습니다.<br>Amazon EC2를 통해 원하는 만큼 가상 서버를 구축하고 보안 및 네트워크 구성과 스토리지 관리가 가능합니다.<br>또한 Amazon EC2는 요구 사항이나 갑작스러운 인기 증대 등 변동 사항에 따라 신속하게 규모를 확장하거나 축소할 수 있어 서버 트래픽 예측 필요성이 줄어듭니다.</p>
<hr>
<h1 id="EC2-Instance-Create"><a href="#EC2-Instance-Create" class="headerlink" title="EC2 Instance - Create"></a>EC2 Instance - Create</h1><p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/1.png" alt="1"></p>
<ul>
<li>인스턴스 시작</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/2.png" alt="2"></p>
<ul>
<li>Amazon Linux2 AMI 선택</li>
<li>Amazon Linux AMI에서 Jenkins 구성 후 JDK 11 Build시 일부 이슈가 발생 할 수 있으므로<br>Amazon Linux 2 AMI를 추천합니다.<br>(이슈는 일부 Configuration 이 정상적으로 compile되지 않음.)</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/3.png" alt="3"></p>
<ul>
<li>현재 선택한 항목 : 현재 선택한 유형이 필요한 가용성에 해당하는지 확인.</li>
<li>유형 선택 (2019-08-05 기준 t2 보다 t3 사용을 추천, t3가 vCPU가 1개 더 많으며 저렴함)</li>
<li>다음 : 인스턴스 세부 정보 구성 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/4.png" alt="4"></p>
<ul>
<li>기본 항목<ul>
<li>네트워크 : 사용하고자 하는 VPC 선택</li>
<li>서브넷 : 사용하고자 하는 서브넷 선택</li>
<li>퍼블릭 IP 자동 할당 : 가급적이면 활성화.</li>
</ul>
</li>
<li>T2/T3 무제한 : 비활성화<ul>
<li>해당 옵션을 활성화 하는 경우 vCPU 초과 사용시 추가 요금 부과<br>초과치는 유형별 틀릴 수 있습니다.</li>
</ul>
</li>
<li>다음 : 스토리지 추가 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/5.png" alt="5"></p>
<ul>
<li>EBS Size 입력.</li>
<li>볼륨 유형 지정 : 옵션은 다음과 같습니다.<ul>
<li>범용 SSD : 기본값</li>
<li>프로비저닝된 IOPS SSD : 성능은 좋지만 비쌉니다.</li>
<li>마그네틱</li>
</ul>
</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/6.png" alt="6"></p>
<ul>
<li>Key</li>
<li>Value</li>
<li>Key/Value로 Name과 service-name은 기본으로 추가 할것을 추천합니다.</li>
<li>그외에 Key/Value는 필요에 따라 추가. </li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/7.png" alt="7"></p>
<ul>
<li>보안 그룹 할당<ul>
<li>새 보안 그룹 생성</li>
<li>기존 보안 그룹 선택<ul>
<li>이미 생성된 보안 그룹을 사용 할 때 사용.</li>
<li>Cluster 구성일때 사용하며 그외의 경우에 사용은 추천하지 않습니다.</li>
</ul>
</li>
</ul>
</li>
<li>보안 그룹 이름 : service-name prefix</li>
<li>유형<ul>
<li>기본적으로 SSH 22 port 이며 특정 IP 제한하는것을 추천.</li>
<li>필요에 따라 추가.</li>
</ul>
</li>
<li>검토 및 시작 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/8.png" alt="8"></p>
<ul>
<li>앞서 선택 및 입력한 정보들을 재확인.<ul>
<li>AMI 세부 정보</li>
<li>인스턴스 유형</li>
<li>보안 그룹</li>
<li>인스턴스 세부 정보</li>
<li>스토리지</li>
<li>태그</li>
</ul>
</li>
<li>시작하기 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/9-1.png" alt="9-1"><br><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/9-2.png" alt="9-2"><br><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/9-3.png" alt="9-3"></p>
<ul>
<li>키 페어<ul>
<li>기존 키 페어 선택 : 개발 서버에서 지정된 키를 사용하라고 명시 되어있거나<br>Scale Up, Scale Out 하는 경우 사용.</li>
<li>새 키페어 생성 : 주로 운영에서 신규 서비스 인스턴스 구축시 사용.<ul>
<li>키 페어 이름 입력</li>
<li>키 페어 다운로드 (다운 받은 후 분실시 복구 불가)</li>
</ul>
</li>
<li>키 페어 없이 계속 : 비 추천</li>
</ul>
</li>
<li>인스턴스 시작 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/10.png" alt="12"></p>
<ul>
<li>인스턴스 시작 요청 상태 확인</li>
<li>인스턴스 보기 클릭</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/computing/ec2/instance/create/11.png" alt="12"></p>
<ul>
<li>생성된 인스턴스 확인</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Computing</category>
        <category>EC2</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
        <tag>Computing</tag>
      </tags>
  </entry>
  <entry>
    <title>Internet Gateway - Create</title>
    <url>/2019/08/06/dev/devops/aws/network-contents/vpc/internet-gateway/create/internet-gateway-create/</url>
    <content><![CDATA[<p>Internet Gateway는 수평 확장되고 가용성이 높은 중복 VPC 구성 요소 입니다<br>VPC의 인스턴스와 인터넷 간에 통신할 수 있게 해줌과 동시에 네트워크 트래픽에 가용성 위험이나 대역폭 제약 조건이 발생하지 않고.<br>IPv4 및 IPv6 트래픽을 지원합니다.<br>그리고 인터넷 라우팅 가능 트래픽에 대한 VPC 라우팅 테이블에 대상을 제공하고,<br>퍼블릭 IPv4 주소가 할당된 인스턴스에 대해 NAT(네트워크 주소 변환)를 수행하는 두 가지 목적이 있습니다.</p>
<hr>
<h1 id="Routing-Table-Create"><a href="#Routing-Table-Create" class="headerlink" title="Routing Table - Create"></a>Routing Table - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/create/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/create/2.png" alt="2"></p>
<ul>
<li><code>인터넷 게이트웨이</code> 메뉴 이동.</li>
<li><code>인터넷 게이트웨이 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/create/3.png" alt="3"></p>
<ul>
<li>Name 태그 : 인터넷 게이트웨이 이름.</li>
<li><code>생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/create/4.png" alt="4"></p>
<ul>
<li><code>인터넷 게이트웨이</code> 생성 요청 확인.</li>
<li><code>닫기</code> 클릭.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Internet Gateway</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Internet Gateway</tag>
      </tags>
  </entry>
  <entry>
    <title>Routing Table - Relation Private Subnet</title>
    <url>/2019/08/12/dev/devops/aws/network-contents/vpc/routing-table/relation/routing-table-relation-private-subnet/</url>
    <content><![CDATA[<p>Private Subnet을 위한 Routing Table Relation 내용입니다.<br>Private Subnet 생성은 다음 Post를 확인하여 미리 생성을 해야 합니다.<br><a href="/2019/08/11/dev/infra/aws/network-contents/vpc/subnet/create/private-subnet-create/">Private Subnet - Create</a></p>
<hr>
<h1 id="Routing-Table-Relation-Private-Subnet"><a href="#Routing-Table-Relation-Private-Subnet" class="headerlink" title="Routing Table - Relation Private Subnet"></a>Routing Table - Relation Private Subnet</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/private-subnet/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/private-subnet/2.png" alt="2"></p>
<ul>
<li><code>라우팅 테이블</code> 메뉴 이동.</li>
<li><code>private routing table</code> 선택.</li>
<li><code>서브넷 연결</code>탭으로 이동.</li>
<li><code>편집</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/private-subnet/3.png" alt="3"></p>
<ul>
<li>할당 하려는 <code>private subnet</code>을 <code>check</code>.</li>
<li><code>저장</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/private-subnet/4.png" alt="4"></p>
<ul>
<li>서브넷 <code>저장 성공</code> 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Routing Table</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Routing Table</tag>
      </tags>
  </entry>
  <entry>
    <title>Internet Gateway - Relation VPC</title>
    <url>/2019/08/14/dev/devops/aws/network-contents/vpc/internet-gateway/relation/internet-gateway-relation-vpc/</url>
    <content><![CDATA[<p>해당 Post는 생성한 Internet Gateway를 VPC와 연결하는 내용입니다.<br>Internet Gateway 생성은 다음 Post를 참조하세요.<br><a href="/2019/08/06/dev/infra/aws/network-contents/vpc/internet-gateway/create/internet-gateway-create/">Internet Gateway - Create</a></p>
<hr>
<h1 id="Internet-Gateway-Relation-VPC"><a href="#Internet-Gateway-Relation-VPC" class="headerlink" title="Internet Gateway - Relation VPC"></a>Internet Gateway - Relation VPC</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/relation/vpc/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/relation/vpc/2.png" alt="2"></p>
<ul>
<li><code>인터넷 게이트웨이</code> 메뉴 이동.</li>
<li>분리 되어있는 <code>Internet Gateway</code> 확인 및 선택.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/relation/vpc/3.png" alt="3"></p>
<ul>
<li>상단의 <code>작업</code> 클릭.</li>
<li><code>VPC에 연결</code> 선택.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/relation/vpc/4.png" alt="4"></p>
<ul>
<li>연결하려는 <code>VPC</code>를 선택.</li>
<li><code>연결</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/internet-gateway/relation/vpc/5.png" alt="5"></p>
<ul>
<li>정상적인 연결되었는지 확인</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Internet Gateway</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Internet Gateway</tag>
      </tags>
  </entry>
  <entry>
    <title>Routing Table - Relation Public Subnet</title>
    <url>/2019/08/13/dev/devops/aws/network-contents/vpc/routing-table/relation/routing-table-relation-public-subnet/</url>
    <content><![CDATA[<p>Public Subnet을 위한 Routing Table Relation 내용입니다.<br>Public Subnet 생성은 다음 Post를 확인하여 미리 생성을 해야 합니다.<br><a href="/2019/08/11/dev/infra/aws/network-contents/vpc/subnet/create/public-subnet-create/">Public Subnet - Create</a></p>
<hr>
<h1 id="Routing-Table-Relation-Public-Subnet"><a href="#Routing-Table-Relation-Public-Subnet" class="headerlink" title="Routing Table - Relation Public Subnet"></a>Routing Table - Relation Public Subnet</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/2.png" alt="2"></p>
<ul>
<li><code>라우팅 테이블</code> 메뉴 이동.</li>
<li><code>public routing table</code> 선택.</li>
<li><code>라우팅</code>탭 선택.</li>
<li><code>편집</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/3.png" alt="3"></p>
<ul>
<li><code>다른 라우팅 추가</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/4.png" alt="4"></p>
<ul>
<li><code>대상 주소</code>를 입력 또는 선택.</li>
<li><code>대상</code>을 입력 또는 선택.</li>
<li><code>저장</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/5.png" alt="5"></p>
<ul>
<li><code>public routing table</code> 선택.</li>
<li><code>서브넷 연결</code>탭으로 이동.</li>
<li><code>편집</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/6.png" alt="6"></p>
<ul>
<li>할당 하려는 <code>public subnet</code>을 <code>check</code>.</li>
<li><code>저장</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/relation/public-subnet/7.png" alt="7"></p>
<ul>
<li>서브넷 <code>저장 성공</code> 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Routing Table</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Routing Table</tag>
      </tags>
  </entry>
  <entry>
    <title>Routing Table - Create</title>
    <url>/2019/08/06/dev/devops/aws/network-contents/vpc/routing-table/create/routing-table-create/</url>
    <content><![CDATA[<p>Routing Table에는 네트워크 트래픽을 전달할 위치를 결정하는 데 사용되는 라우팅이라는 규칙 집합이 포함되어 있습니다.</p>
<hr>
<h1 id="Routing-Table-Create"><a href="#Routing-Table-Create" class="headerlink" title="Routing Table - Create"></a>Routing Table - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/create/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/create/2.png" alt="2"></p>
<ul>
<li><code>라우팅 테이블</code> 메뉴 이동.</li>
<li><code>라우팅 테이블 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/routing-table/create/3.png" alt="3"></p>
<ul>
<li>Name 태그 : 라우팅 테이블 이름.</li>
<li>VPC : 라우팅 테이블을 사용할 <code>VPC</code> 선택.</li>
<li><code>예, 생성</code> 클릭.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Routing Table</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Routing Table</tag>
      </tags>
  </entry>
  <entry>
    <title>Public Subnet - Create</title>
    <url>/2019/08/11/dev/devops/aws/network-contents/vpc/subnet/create/public-subnet-create/</url>
    <content><![CDATA[<p>EC2 Instance를 연결 할 수 있는 VPC의 IP 주소 범위의 논리적 세그먼트이며<br>Public Subnet은 Internet Gateway, ELB, 그리고 Public IP/Elastic IP를 가진 인스턴스를 내부에 가지고 있습니다.<br>Public Subnet 내에 있는 Nat Instance를 통하여 Private Subnet내에 있는 instances이 인터넷이 가능하게 합니다.<br>결과적으로 인터넷 게이트웨이 라우팅 여부에 따라 틀리며 subnet 생성은 <code>Name 태그</code>가 다르며 생성 방법은 동일합니다.<br>그리고 2a, 2c 2개 가용영역의 subnet을 생성해봅시다.<br>사실상 private subnet 생성과 다른점은 단순 이름 외에는 없습니다.</p>
<hr>
<h1 id="Public-Subnet-Create"><a href="#Public-Subnet-Create" class="headerlink" title="Public Subnet - Create"></a>Public Subnet - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/2.png" alt="2"></p>
<ul>
<li><code>서브넷</code> 메뉴 이동.</li>
<li><code>서브넷 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/3.png" alt="3"></p>
<ul>
<li>2a 가용 영역의 private subnet 생성.</li>
<li><code>Name 태그</code> : subnet 이름</li>
<li><code>VPC</code> : VPC 선택</li>
<li><code>가용 영역</code> : 2a 가용 영역 선택</li>
<li><code>IPv4 CIDR 블록</code> : CIDR 블록 지정.</li>
<li><code>생성</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/4.png" alt="4"></p>
<ul>
<li>2a 가용 영역 private subnet 생성 완료.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/5.png" alt="5"></p>
<ul>
<li><code>서브넷</code> 메뉴 이동.</li>
<li><code>서브넷 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/6.png" alt="6"></p>
<ul>
<li>2c 가용 영역의 private subnet 생성.</li>
<li><code>Name 태그</code> : subnet 이름</li>
<li><code>VPC</code> : VPC 선택</li>
<li><code>가용 영역</code> : 2c 가용 영역 선택</li>
<li><code>IPv4 CIDR 블록</code> : CIDR 블록 지정.</li>
<li><code>생성</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/7.png" alt="7"></p>
<ul>
<li>2c 가용 영역 private subnet 생성 완료.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Subnet</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Subnet</tag>
      </tags>
  </entry>
  <entry>
    <title>Private Subnet - Create</title>
    <url>/2019/08/11/dev/devops/aws/network-contents/vpc/subnet/create/private-subnet-create/</url>
    <content><![CDATA[<p>EC2 Instance를 연결 할 수 있는 VPC의 IP 주소 범위의 논리적 세그먼트이며<br>기본적으로 외부와 차단되어 있습니다.<br>Private Subnet내의 인스턴스들은 private ip만을 가지고 있으며 internet inbound/outbound가 불가능 하고 오직 다른 서브넷과의 연결만이 가능합니다.<br>결과적으로 인터넷 게이트웨이 라우팅 여부에 따라 틀리며 subnet 생성은 <code>Name 태그</code>가 다르며 생성 방법은 동일합니다.<br>그리고 2a, 2c 2개 가용영역의 subnet을 생성해봅시다.<br>사실상 public subnet 생성과 다른점은 단순 이름 외에는 없습니다.</p>
<hr>
<h1 id="Private-Subnet-Create"><a href="#Private-Subnet-Create" class="headerlink" title="Private Subnet - Create"></a>Private Subnet - Create</h1><p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/1.png" alt="1"></p>
<ul>
<li><code>VPC</code> 메뉴 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/2.png" alt="2"></p>
<ul>
<li><code>서브넷</code> 메뉴 이동.</li>
<li><code>서브넷 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/3.png" alt="3"></p>
<ul>
<li>2a 가용 영역의 private subnet 생성.</li>
<li><code>Name 태그</code> : subnet 이름</li>
<li><code>VPC</code> : VPC 선택</li>
<li><code>가용 영역</code> : 2a 가용 영역 선택</li>
<li><code>IPv4 CIDR 블록</code> : CIDR 블록 지정.</li>
<li><code>생성</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/4.png" alt="4"></p>
<ul>
<li>2a 가용 영역 private subnet 생성 완료.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/5.png" alt="5"></p>
<ul>
<li><code>서브넷</code> 메뉴 이동.</li>
<li><code>서브넷 생성</code> 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/6.png" alt="6"></p>
<ul>
<li>2c 가용 영역의 private subnet 생성.</li>
<li><code>Name 태그</code> : subnet 이름</li>
<li><code>VPC</code> : VPC 선택</li>
<li><code>가용 영역</code> : 2c 가용 영역 선택</li>
<li><code>IPv4 CIDR 블록</code> : CIDR 블록 지정.</li>
<li><code>생성</code> 버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/network-contents/vpc/subnet/private-subnet-create/7.png" alt="7"></p>
<ul>
<li>2c 가용 영역 private subnet 생성 완료.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Network And Contents</category>
        <category>VPC</category>
        <category>Subnet</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Network And Contents</tag>
        <tag>VPC</tag>
        <tag>Subnet</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - Apply Role</title>
    <url>/2019/08/01/dev/devops/aws/security-credentials/iam/role/ecr/apply/ecr-role-apply/</url>
    <content><![CDATA[<p>Role이 먼저 생성되었다는 전재하에 진행됩니다.<br>Role 추가는 <a href="/2019/08/01/dev/infra/aws/security-credentials/iam/role/ecr/create/ecr-role-create/">Create Role - ECR</a>.</p>
<hr>
<h1 id="ECR-Apply-Role"><a href="#ECR-Apply-Role" class="headerlink" title="ECR - Apply Role"></a>ECR - Apply Role</h1><h2 id="해당-인스턴스의-IAM-확인"><a href="#해당-인스턴스의-IAM-확인" class="headerlink" title="해당 인스턴스의 IAM 확인"></a>해당 인스턴스의 IAM 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> aws configure list</span></span><br><span class="line">      Name                    Value             Type    Location</span><br><span class="line">      ----                    -----             ----    --------</span><br><span class="line">   profile                &lt;not set&gt;             None    None</span><br><span class="line">access_key                &lt;not set&gt;             None    None</span><br><span class="line">secret_key                &lt;not set&gt;             None    None</span><br><span class="line">    region                &lt;not set&gt;             None    None</span><br></pre></td></tr></table></figure>
<ul>
<li><code>aws configure list</code> aws cli 를 활용하여 현재 IAM 역할 할당 확인.</li>
</ul>
<hr>
<h2 id="EC2-서비스로-이동"><a href="#EC2-서비스로-이동" class="headerlink" title="EC2 서비스로 이동"></a>EC2 서비스로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/1.jpg" alt="1"></p>
<hr>
<h2 id="인스턴스로-이동"><a href="#인스턴스로-이동" class="headerlink" title="인스턴스로 이동"></a>인스턴스로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/2.jpg" alt="2"></p>
<hr>
<h2 id="특정-인스턴스-Role-할당으로-이동"><a href="#특정-인스턴스-Role-할당으로-이동" class="headerlink" title="특정 인스턴스 Role 할당으로 이동"></a>특정 인스턴스 Role 할당으로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/3.png" alt="3"></p>
<ul>
<li>Role 할당 하려는 인스턴스 선택</li>
<li>인스턴스 설정</li>
<li>IAM 역할 연결/바꾸기</li>
</ul>
<hr>
<h2 id="IAM-역할-연결-바꾸기"><a href="#IAM-역할-연결-바꾸기" class="headerlink" title="IAM 역할 연결/바꾸기"></a>IAM 역할 연결/바꾸기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/4.png" alt="4"></p>
<ul>
<li>선택할 수 있는 IAM 역할 확인</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/5.png" alt="5"></p>
<ul>
<li>ECR Role 역할 선택</li>
</ul>
<hr>
<h2 id="작업-결과-확인"><a href="#작업-결과-확인" class="headerlink" title="작업 결과 확인"></a>작업 결과 확인</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/apply/6.JPG" alt="6"></p>
<hr>
<h2 id="할당한-IAM-Role-EC2에서-확인"><a href="#할당한-IAM-Role-EC2에서-확인" class="headerlink" title="할당한 IAM Role EC2에서 확인"></a>할당한 IAM Role EC2에서 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> aws configure list</span></span><br><span class="line">      Name                    Value             Type    Location</span><br><span class="line">      ----                    -----             ----    --------</span><br><span class="line">   profile                &lt;not set&gt;             None    None</span><br><span class="line">access_key     ****************JHUU         iam-role   </span><br><span class="line">secret_key     ****************Woh6         iam-role   </span><br><span class="line">    region                &lt;not set&gt;             None    None</span><br></pre></td></tr></table></figure>
<ul>
<li><code>aws configure list</code> aws cli 를 활용하여 현재 IAM 역할 할당 확인.</li>
<li>설정과 동일한 정상적인 할당 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>ECR</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
      </tags>
  </entry>
  <entry>
    <title>S3 - Apply Role</title>
    <url>/2019/04/21/dev/devops/aws/security-credentials/iam/role/s3/apply/s3-role-apply/</url>
    <content><![CDATA[<p>S3를 사용하기 위해 생성한 IAM Role을 EC2에 할당 하는 방법입니다.<br>Role이 먼저 생성되었다는 전재하에 진행되며<br>Role 추가는 <a href="/2019/04/21/dev/infra/aws/security-credentials/iam/role/s3/create/s3-role-create/">Create Role - S3</a> 확인하면됩니다.</p>
<hr>
<h1 id="S3-Apply-Role"><a href="#S3-Apply-Role" class="headerlink" title="S3 - Apply Role"></a>S3 - Apply Role</h1><h2 id="해당-인스턴스의-IAM-확인"><a href="#해당-인스턴스의-IAM-확인" class="headerlink" title="해당 인스턴스의 IAM 확인"></a>해당 인스턴스의 IAM 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> aws configure list</span></span><br><span class="line">      Name                    Value             Type    Location</span><br><span class="line">      ----                    -----             ----    --------</span><br><span class="line">   profile                &lt;not set&gt;             None    None</span><br><span class="line">access_key                &lt;not set&gt;             None    None</span><br><span class="line">secret_key                &lt;not set&gt;             None    None</span><br><span class="line">    region                &lt;not set&gt;             None    None</span><br></pre></td></tr></table></figure>
<ul>
<li><code>aws configure list</code> aws cli 를 활용하여 현재 IAM 역할 할당 확인.</li>
</ul>
<hr>
<h2 id="EC2-서비스로-이동"><a href="#EC2-서비스로-이동" class="headerlink" title="EC2 서비스로 이동"></a>EC2 서비스로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/1.jpg" alt="1"></p>
<hr>
<h2 id="인스턴스로-이동"><a href="#인스턴스로-이동" class="headerlink" title="인스턴스로 이동"></a>인스턴스로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/2.jpg" alt="2"></p>
<hr>
<h2 id="특정-인스턴스-Role-할당으로-이동"><a href="#특정-인스턴스-Role-할당으로-이동" class="headerlink" title="특정 인스턴스 Role 할당으로 이동"></a>특정 인스턴스 Role 할당으로 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/3.jpg" alt="3"></p>
<ul>
<li>Role 할당 하려는 인스턴스 선택</li>
<li>인스턴스 설정</li>
<li>IAM 역할 연결/바꾸기</li>
</ul>
<hr>
<h2 id="IAM-역할-연결-바꾸기"><a href="#IAM-역할-연결-바꾸기" class="headerlink" title="IAM 역할 연결/바꾸기"></a>IAM 역할 연결/바꾸기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/4.jpg" alt="4"></p>
<ul>
<li>선택할 수 있는 IAM 역할 확인</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/5.jpg" alt="5"></p>
<ul>
<li>S3 Role 역할 선택</li>
</ul>
<hr>
<h2 id="작업-결과-확인"><a href="#작업-결과-확인" class="headerlink" title="작업 결과 확인"></a>작업 결과 확인</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/apply/6.jpg" alt="6"></p>
<hr>
<h2 id="할당한-IAM-Role-EC2에서-확인"><a href="#할당한-IAM-Role-EC2에서-확인" class="headerlink" title="할당한 IAM Role EC2에서 확인"></a>할당한 IAM Role EC2에서 확인</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[ec2-user]$</span><span class="bash"> aws configure list</span></span><br><span class="line">      Name                    Value             Type    Location</span><br><span class="line">      ----                    -----             ----    --------</span><br><span class="line">   profile                &lt;not set&gt;             None    None</span><br><span class="line">access_key     ****************BD7J         iam-role   </span><br><span class="line">secret_key     ****************ykaj         iam-role   </span><br><span class="line">    region                &lt;not set&gt;             None    None</span><br></pre></td></tr></table></figure>
<ul>
<li><code>aws configure list</code> aws cli 를 활용하여 현재 IAM 역할 할당 확인.</li>
<li>설정과 동일한 정상적인 할당 확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>S3</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
        <tag>S3</tag>
      </tags>
  </entry>
  <entry>
    <title>S3 - Create Role</title>
    <url>/2019/04/21/dev/devops/aws/security-credentials/iam/role/s3/create/s3-role-create/</url>
    <content><![CDATA[<p>EC2 IAM 에 S3 접근 권한을 추가 하기 위해 생성하는 Role 입니다.</p>
<hr>
<h1 id="S3-Create-Role"><a href="#S3-Create-Role" class="headerlink" title="S3 - Create Role"></a>S3 - Create Role</h1><h2 id="AWS-메인에서-내-보안-자격-증명-이동"><a href="#AWS-메인에서-내-보안-자격-증명-이동" class="headerlink" title="AWS 메인에서 [내 보안 자격 증명] 이동."></a>AWS 메인에서 [내 보안 자격 증명] 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/1.jpg" alt="1"></p>
<hr>
<h2 id="역할-탭으로-이동"><a href="#역할-탭으로-이동" class="headerlink" title="역할 탭으로 이동."></a>역할 탭으로 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/2.jpg" alt="2"></p>
<hr>
<h2 id="역할-만들기-클릭"><a href="#역할-만들기-클릭" class="headerlink" title="역할 만들기 클릭."></a>역할 만들기 클릭.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/3.jpg" alt="3"></p>
<hr>
<h2 id="역할-만들기"><a href="#역할-만들기" class="headerlink" title="역할 만들기"></a>역할 만들기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/4.jpg" alt="4"></p>
<ul>
<li>신뢰할 수 있는 유형의 개체 : AWS 서비스 선택</li>
<li>이 역할을 사용할 서비스 : EC2 선택</li>
</ul>
<hr>
<h2 id="권한-정책-연결"><a href="#권한-정책-연결" class="headerlink" title="권한 정책 연결"></a>권한 정책 연결</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/5.jpg" alt="5"></p>
<ul>
<li>정책 필터 : amazons3 cloud formation 입력</li>
<li><code>AmazonS3FullAccess</code>, <code>AWSCloudFormationReadOnlyAccess</code></li>
<li><code>AWSCloudFormationReadOnlyAccess</code>를 추가하는 이유는 Spring Boot Framework 사용시 최초 Cloud Formation 을 접근하려 하기 때문입니다.</li>
</ul>
<hr>
<h2 id="태그-추가"><a href="#태그-추가" class="headerlink" title="태그 추가"></a>태그 추가</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/6.jpg" alt="6"></p>
<ul>
<li>필요한 태그가 있는 경우 추가.</li>
</ul>
<hr>
<h2 id="역할-검토"><a href="#역할-검토" class="headerlink" title="역할 검토"></a>역할 검토</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/7.jpg" alt="7"></p>
<ul>
<li>역할 이름 입력</li>
<li>선택한 정책 재확인.</li>
</ul>
<hr>
<h2 id="생성된-역할-확인"><a href="#생성된-역할-확인" class="headerlink" title="생성된 역할 확인"></a>생성된 역할 확인</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/s3/create/8.jpg" alt="8"></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>S3</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
        <tag>S3</tag>
      </tags>
  </entry>
  <entry>
    <title>ECR - Create Role</title>
    <url>/2019/08/01/dev/devops/aws/security-credentials/iam/role/ecr/create/ecr-role-create/</url>
    <content><![CDATA[<p>EC2 IAM에 ECR 접근 권한을 추가 하기 위해 생성하는 Role입니다.</p>
<hr>
<h1 id="ECR-Create-Role"><a href="#ECR-Create-Role" class="headerlink" title="ECR - Create Role"></a>ECR - Create Role</h1><h2 id="AWS-메인에서-내-보안-자격-증명-이동"><a href="#AWS-메인에서-내-보안-자격-증명-이동" class="headerlink" title="AWS 메인에서 [내 보안 자격 증명] 이동"></a>AWS 메인에서 [내 보안 자격 증명] 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/1.jpg" alt="1"></p>
<hr>
<h2 id="역할-탭으로-이동"><a href="#역할-탭으로-이동" class="headerlink" title="역할 탭으로 이동."></a>역할 탭으로 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/2.jpg" alt="2"></p>
<hr>
<h2 id="역할-만들기-클릭"><a href="#역할-만들기-클릭" class="headerlink" title="역할 만들기 클릭."></a>역할 만들기 클릭.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/3.jpg" alt="3"></p>
<hr>
<h2 id="역할-만들기"><a href="#역할-만들기" class="headerlink" title="역할 만들기"></a>역할 만들기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/4.jpg" alt="4"></p>
<ul>
<li>신뢰할 수 있는 유형의 개체 : AWS 서비스 선택</li>
<li>이 역할을 사용할 서비스 : EC2 선택</li>
<li>다음 : 권한으로 이동.</li>
</ul>
<hr>
<h2 id="권한-정책-연결"><a href="#권한-정책-연결" class="headerlink" title="권한 정책 연결"></a>권한 정책 연결</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/5.png" alt="5"></p>
<ul>
<li>정책 필터 : <code>AmazonEC2ContainerRegistry</code> 입력</li>
<li>정책 선택 : 정책은 상황에 맞게 할 필요가 있으며 아래의 정책을 모두 선택하는게 정답은 아닙니다.<ul>
<li><code>AmazonEC2ContainerRegistryFullAccess</code></li>
<li><code>AmazonEC2ContainerRegistryPowerUser</code></li>
<li><code>AmazonEC2ContainerRegistryReadOnly</code></li>
</ul>
</li>
<li>다음 : 태그로 이동.</li>
</ul>
<hr>
<h2 id="태그-추가"><a href="#태그-추가" class="headerlink" title="태그 추가"></a>태그 추가</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/6.JPG" alt="6"></p>
<ul>
<li>필요한 태그가 있는 경우 추가.</li>
</ul>
<hr>
<h2 id="역할-검토"><a href="#역할-검토" class="headerlink" title="역할 검토"></a>역할 검토</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/ecr/create/7.png" alt="7"></p>
<ul>
<li>역할 이름 입력</li>
<li>선택한 정책 재확인.</li>
<li>역할 만들기.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>ECR</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>ECR</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
      </tags>
  </entry>
  <entry>
    <title>Lambda@Edge - Create Role</title>
    <url>/2019/08/16/dev/devops/aws/security-credentials/iam/role/lambda/create/lambda-edge-role-create/</url>
    <content><![CDATA[<p>Lambda 실행 권한을 추가 하기 위해 생성하는 Role입니다.<br>가이드상으로는 S3 접근권한도 포함되어 있습니다<br>실제 생성시 S3접근이 필요하지 않으면 S3 접근권한은 제외하여 진행하면 됩니다.</p>
<hr>
<h1 id="Lambda-Edge-Create-Role"><a href="#Lambda-Edge-Create-Role" class="headerlink" title="Lambda@Edge - Create Role"></a>Lambda@Edge - Create Role</h1><h2 id="역할-메뉴-이동"><a href="#역할-메뉴-이동" class="headerlink" title="역할 메뉴 이동"></a>역할 메뉴 이동</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/1.png" alt="1"></p>
<ul>
<li>AWS 메인에서 [내 보안 자격 증명] 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/2.png" alt="2"></p>
<ul>
<li>역할 탭으로 이동.</li>
</ul>
<hr>
<h2 id="역할-만들기"><a href="#역할-만들기" class="headerlink" title="역할 만들기"></a>역할 만들기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/3.png" alt="3"></p>
<ul>
<li>역할 만들기 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/4.png" alt="4"></p>
<ul>
<li>신뢰할 수 있는 유형의 개체 : <code>AWS 서비스</code> 선택</li>
<li>이 역할을 사용할 서비스 : <code>Lambda</code> 선택</li>
<li><code>다음:권한</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/5.png" alt="5"></p>
<ul>
<li>정책 필터 : <code>AWSLambdaBasicExecutionRole</code> <code>AmazonS3FullAccess</code> 입력</li>
<li><code>AWSLambdaBasicExecutionRole</code>, <code>AmazonS3FullAccess</code></li>
<li><code>AmazonS3FullAccess</code>를 추가하는 이유는 가이드 작성시 <code>Lambda</code>에서 S3접근 권한이 필요했기 때문이며<br>실제 필요하지 않은 경우 제외하시면 됩니다.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/6.png" alt="6"></p>
<ul>
<li>필요한 태그가 있는 경우 추가.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/7.png" alt="7"></p>
<ul>
<li><code>역할 이름</code> 입력</li>
<li><code>신뢰할 수 있는 개체</code> 확인.</li>
<li><code>정책</code> 확인.</li>
<li><code>역할 만들기</code>버튼 클릭.</li>
</ul>
<hr>
<h2 id="Edge-관계-추가"><a href="#Edge-관계-추가" class="headerlink" title="Edge 관계 추가."></a>Edge 관계 추가.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/8.png" alt="8"></p>
<ul>
<li>생성한 Role의 상세로 이동.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/9.png" alt="9"></p>
<ul>
<li><code>신뢰 관계</code>탭으로 이동.</li>
<li><code>신뢰 관계 편집</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/10.png" alt="10"></p>
<ul>
<li><code>service</code>항목에 <code>edgelambda.amazonaws.com</code> 추가.</li>
<li><code>신뢰 정책 업데이트</code>버튼 클릭.</li>
</ul>
<hr>
<p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda-edge/create/11.png" alt="11"></p>
<ul>
<li>추가한 <code>신뢰할 수 있는 개체</code>확인.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>Lambda@Edge</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
        <tag>Lambda@Edge</tag>
      </tags>
  </entry>
  <entry>
    <title>Lambda - Create Role</title>
    <url>/2019/08/15/dev/devops/aws/security-credentials/iam/role/lambda/create/lambda-role-create/</url>
    <content><![CDATA[<p>Lambda 실행 권한을 추가 하기 위해 생성하는 Role입니다.<br>가이드상으로는 S3 접근권한도 포함되어 있습니다<br>실제 생성시 S3접근이 필요하지 않으면 S3 접근권한은 제외하여 진행하면 됩니다.</p>
<hr>
<h1 id="Lambda-Create-Role"><a href="#Lambda-Create-Role" class="headerlink" title="Lambda - Create Role"></a>Lambda - Create Role</h1><h2 id="AWS-메인에서-내-보안-자격-증명-이동"><a href="#AWS-메인에서-내-보안-자격-증명-이동" class="headerlink" title="AWS 메인에서 [내 보안 자격 증명] 이동."></a>AWS 메인에서 [내 보안 자격 증명] 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/1.png" alt="1"></p>
<hr>
<h2 id="역할-탭으로-이동"><a href="#역할-탭으로-이동" class="headerlink" title="역할 탭으로 이동."></a>역할 탭으로 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/2.png" alt="2"></p>
<hr>
<h2 id="역할-만들기-클릭"><a href="#역할-만들기-클릭" class="headerlink" title="역할 만들기 클릭."></a>역할 만들기 클릭.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/3.png" alt="3"></p>
<hr>
<h2 id="역할-만들기"><a href="#역할-만들기" class="headerlink" title="역할 만들기"></a>역할 만들기</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/4.png" alt="4"></p>
<ul>
<li>신뢰할 수 있는 유형의 개체 : <code>AWS 서비스</code> 선택</li>
<li>이 역할을 사용할 서비스 : <code>Lambda</code> 선택</li>
<li><code>다음:권한</code>버튼 클릭.</li>
</ul>
<hr>
<h2 id="권한-정책-연결"><a href="#권한-정책-연결" class="headerlink" title="권한 정책 연결"></a>권한 정책 연결</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/5.png" alt="5"></p>
<ul>
<li>정책 필터 : <code>AWSLambdaBasicExecutionRole</code> <code>AmazonS3FullAccess</code> 입력</li>
<li><code>AWSLambdaBasicExecutionRole</code>, <code>AmazonS3FullAccess</code></li>
<li><code>AmazonS3FullAccess</code>를 추가하는 이유는 가이드 작성시 <code>Lambda</code>에서 S3접근 권한이 필요했기 때문이며<br>실제 필요하지 않은 경우 제외하시면 됩니다.</li>
</ul>
<hr>
<h2 id="태그-추가"><a href="#태그-추가" class="headerlink" title="태그 추가"></a>태그 추가</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/6.png" alt="6"></p>
<ul>
<li>필요한 태그가 있는 경우 추가.</li>
</ul>
<hr>
<h2 id="역할-검토"><a href="#역할-검토" class="headerlink" title="역할 검토"></a>역할 검토</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/role/lambda/create/7.png" alt="7"></p>
<ul>
<li><code>역할 이름</code> 입력</li>
<li><code>신뢰할 수 있는 개체</code> 확인.</li>
<li><code>정책</code> 확인.</li>
<li><code>역할 만들기</code>버튼 클릭.</li>
</ul>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>Role</category>
        <category>Lambda</category>
      </categories>
      <tags>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>Role</tag>
        <tag>Lambda</tag>
      </tags>
  </entry>
  <entry>
    <title>S3 - Create User</title>
    <url>/2019/04/21/dev/devops/aws/security-credentials/iam/user/s3/create/s3-user-create/</url>
    <content><![CDATA[<p>개인적으로 S3를 위한 IAM을 생성해서 사용하는 경우는 거의 없습니다.<br>그 이유는 AWS에서 특정 서비스를 이용해서 S3를 이용해야 하는 경우 IAM Role을 생성하여 EC2 Instance에 부여해서<br>인스턴스 자체의 role을 이용하여 S3에 접근하는 방법을 선호하며<br>IAM을 생성하여 사용하는 경우는 로컬에서 테스트를 위한 작업 외에는 전혀 없습니다.<br>그리고 IAM을 잘 사용하지 않는 이유는 소스 파일에 key를 포함하거나 혹은 포함하지 않더라도 따로 보관하여 올리거나 할때<br>관리 포인트도 늘어나게되고, 아무리 private git을 사용한다 할지라도 소스자체에 키를 포함시키는것은 좋지 않아 보이기 때문입니다.</p>
<hr>
<h1 id="S3-Create-User"><a href="#S3-Create-User" class="headerlink" title="S3 - Create User"></a>S3 - Create User</h1><h2 id="AWS-메인에서-내-보안-자격-증명-이동"><a href="#AWS-메인에서-내-보안-자격-증명-이동" class="headerlink" title="AWS 메인에서 [내 보안 자격 증명] 이동."></a>AWS 메인에서 [내 보안 자격 증명] 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/1.jpg" alt="1"></p>
<hr>
<h2 id="사용자-탭으로-이동"><a href="#사용자-탭으로-이동" class="headerlink" title="사용자 탭으로 이동."></a>사용자 탭으로 이동.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/2.jpg" alt="2"></p>
<hr>
<h2 id="사용자-추가"><a href="#사용자-추가" class="headerlink" title="사용자 추가."></a>사용자 추가.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/3.jpg" alt="3"></p>
<hr>
<h2 id="사용자-정보-입력"><a href="#사용자-정보-입력" class="headerlink" title="사용자 정보 입력."></a>사용자 정보 입력.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/4.jpg" alt="4"></p>
<ul>
<li>사용자 이름 입력.</li>
<li>엑세스 유형을 프로그래밍 방식 엑세스 체크.</li>
<li>accessKey, secretKey 인증 방식 </li>
</ul>
<hr>
<h2 id="기존-정책-직접-연결"><a href="#기존-정책-직접-연결" class="headerlink" title="기존 정책 직접 연결"></a>기존 정책 직접 연결</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/5.jpg" alt="5"></p>
<ul>
<li>필터 검색</li>
<li>AmazonS3FullAccess 체크</li>
</ul>
<hr>
<h2 id="태그-추가"><a href="#태그-추가" class="headerlink" title="태그 추가."></a>태그 추가.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/6.jpg" alt="6"></p>
<ul>
<li>필요한 태그가 있는 경우 추가.</li>
</ul>
<hr>
<h2 id="정보-확인"><a href="#정보-확인" class="headerlink" title="정보 확인"></a>정보 확인</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/7.jpg" alt="7"></p>
<hr>
<h2 id="추가된-사용자-accessKey-secretKey-확인"><a href="#추가된-사용자-accessKey-secretKey-확인" class="headerlink" title="추가된 사용자 accessKey, secretKey 확인."></a>추가된 사용자 accessKey, secretKey 확인.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/8.jpg" alt="8"><br><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/9.jpg" alt="9"></p>
<hr>
<h2 id="생성된-사용자-확인-후-사용"><a href="#생성된-사용자-확인-후-사용" class="headerlink" title="생성된 사용자 확인 후 사용."></a>생성된 사용자 확인 후 사용.</h2><p><img data-src="/image/dev/devops/aws/security-credentials/iam/user/s3/create/10.jpg" alt="10"></p>
]]></content>
      <categories>
        <category>Dev</category>
        <category>DevOps</category>
        <category>AWS</category>
        <category>Security Credentials</category>
        <category>IAM</category>
        <category>User</category>
        <category>S3</category>
      </categories>
      <tags>
        <tag>User</tag>
        <tag>AWS</tag>
        <tag>Security Credentials</tag>
        <tag>IAM</tag>
        <tag>S3</tag>
      </tags>
  </entry>
</search>
